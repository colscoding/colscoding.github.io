{"version":3,"file":"web-i4aVcvOV.js","sources":["../../../../node_modules/.pnpm/@capacitor-community+bluetooth-le@7.3.0_@capacitor+core@8.0.0/node_modules/@capacitor-community/bluetooth-le/dist/esm/timeout.js","../../../../node_modules/.pnpm/@capacitor-community+bluetooth-le@7.3.0_@capacitor+core@8.0.0/node_modules/@capacitor-community/bluetooth-le/dist/esm/web.js"],"sourcesContent":["export async function runWithTimeout(promise, time, exception) {\r\n    let timer;\r\n    return Promise.race([\r\n        promise,\r\n        new Promise((_, reject) => {\r\n            timer = setTimeout(() => reject(exception), time);\r\n        }),\r\n    ]).finally(() => clearTimeout(timer));\r\n}\r\n//# sourceMappingURL=timeout.js.map","import { WebPlugin } from '@capacitor/core';\r\nimport { hexStringToDataView, mapToObject, webUUIDToString } from './conversion';\r\nimport { runWithTimeout } from './timeout';\r\nexport class BluetoothLeWeb extends WebPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.deviceMap = new Map();\r\n        this.discoveredDevices = new Map();\r\n        this.scan = null;\r\n        this.DEFAULT_CONNECTION_TIMEOUT = 10000;\r\n        this.onAdvertisementReceivedCallback = this.onAdvertisementReceived.bind(this);\r\n        this.onDisconnectedCallback = this.onDisconnected.bind(this);\r\n        this.onCharacteristicValueChangedCallback = this.onCharacteristicValueChanged.bind(this);\r\n    }\r\n    async initialize() {\r\n        if (typeof navigator === 'undefined' || !navigator.bluetooth) {\r\n            throw this.unavailable('Web Bluetooth API not available in this browser.');\r\n        }\r\n        const isAvailable = await navigator.bluetooth.getAvailability();\r\n        if (!isAvailable) {\r\n            throw this.unavailable('No Bluetooth radio available.');\r\n        }\r\n    }\r\n    async isEnabled() {\r\n        // not available on web\r\n        return { value: true };\r\n    }\r\n    async requestEnable() {\r\n        throw this.unavailable('requestEnable is not available on web.');\r\n    }\r\n    async enable() {\r\n        throw this.unavailable('enable is not available on web.');\r\n    }\r\n    async disable() {\r\n        throw this.unavailable('disable is not available on web.');\r\n    }\r\n    async startEnabledNotifications() {\r\n        // not available on web\r\n    }\r\n    async stopEnabledNotifications() {\r\n        // not available on web\r\n    }\r\n    async isLocationEnabled() {\r\n        throw this.unavailable('isLocationEnabled is not available on web.');\r\n    }\r\n    async openLocationSettings() {\r\n        throw this.unavailable('openLocationSettings is not available on web.');\r\n    }\r\n    async openBluetoothSettings() {\r\n        throw this.unavailable('openBluetoothSettings is not available on web.');\r\n    }\r\n    async openAppSettings() {\r\n        throw this.unavailable('openAppSettings is not available on web.');\r\n    }\r\n    async setDisplayStrings() {\r\n        // not available on web\r\n    }\r\n    async requestDevice(options) {\r\n        const filters = this.getFilters(options);\r\n        const device = await navigator.bluetooth.requestDevice({\r\n            filters: filters.length ? filters : undefined,\r\n            optionalServices: options === null || options === void 0 ? void 0 : options.optionalServices,\r\n            acceptAllDevices: filters.length === 0,\r\n        });\r\n        this.deviceMap.set(device.id, device);\r\n        const bleDevice = this.getBleDevice(device);\r\n        return bleDevice;\r\n    }\r\n    async requestLEScan(options) {\r\n        this.requestBleDeviceOptions = options;\r\n        const filters = this.getFilters(options);\r\n        await this.stopLEScan();\r\n        this.discoveredDevices = new Map();\r\n        navigator.bluetooth.removeEventListener('advertisementreceived', this.onAdvertisementReceivedCallback);\r\n        navigator.bluetooth.addEventListener('advertisementreceived', this.onAdvertisementReceivedCallback);\r\n        this.scan = await navigator.bluetooth.requestLEScan({\r\n            filters: filters.length ? filters : undefined,\r\n            acceptAllAdvertisements: filters.length === 0,\r\n            keepRepeatedDevices: options === null || options === void 0 ? void 0 : options.allowDuplicates,\r\n        });\r\n    }\r\n    onAdvertisementReceived(event) {\r\n        var _a, _b, _c;\r\n        const deviceId = event.device.id;\r\n        this.deviceMap.set(deviceId, event.device);\r\n        const isNew = !this.discoveredDevices.has(deviceId);\r\n        // Apply service data filtering client-side (Web Bluetooth API doesn't support it in scan filters)\r\n        if (((_a = this.requestBleDeviceOptions) === null || _a === void 0 ? void 0 : _a.serviceData) && !this.matchesServiceDataFilter(event)) {\r\n            return;\r\n        }\r\n        if (isNew || ((_b = this.requestBleDeviceOptions) === null || _b === void 0 ? void 0 : _b.allowDuplicates)) {\r\n            this.discoveredDevices.set(deviceId, true);\r\n            const device = this.getBleDevice(event.device);\r\n            const result = {\r\n                device,\r\n                localName: device.name,\r\n                rssi: event.rssi,\r\n                txPower: event.txPower,\r\n                manufacturerData: mapToObject(event.manufacturerData),\r\n                serviceData: mapToObject(event.serviceData),\r\n                uuids: (_c = event.uuids) === null || _c === void 0 ? void 0 : _c.map(webUUIDToString),\r\n            };\r\n            this.notifyListeners('onScanResult', result);\r\n        }\r\n    }\r\n    async stopLEScan() {\r\n        var _a;\r\n        if ((_a = this.scan) === null || _a === void 0 ? void 0 : _a.active) {\r\n            this.scan.stop();\r\n        }\r\n        this.scan = null;\r\n    }\r\n    async getDevices(options) {\r\n        const devices = await navigator.bluetooth.getDevices();\r\n        const bleDevices = devices\r\n            .filter((device) => options.deviceIds.includes(device.id))\r\n            .map((device) => {\r\n            this.deviceMap.set(device.id, device);\r\n            const bleDevice = this.getBleDevice(device);\r\n            return bleDevice;\r\n        });\r\n        return { devices: bleDevices };\r\n    }\r\n    async getConnectedDevices(_options) {\r\n        const devices = await navigator.bluetooth.getDevices();\r\n        const bleDevices = devices\r\n            .filter((device) => {\r\n            var _a;\r\n            return (_a = device.gatt) === null || _a === void 0 ? void 0 : _a.connected;\r\n        })\r\n            .map((device) => {\r\n            this.deviceMap.set(device.id, device);\r\n            const bleDevice = this.getBleDevice(device);\r\n            return bleDevice;\r\n        });\r\n        return { devices: bleDevices };\r\n    }\r\n    async getBondedDevices() {\r\n        return {};\r\n    }\r\n    async connect(options) {\r\n        var _a, _b;\r\n        const device = this.getDeviceFromMap(options.deviceId);\r\n        device.removeEventListener('gattserverdisconnected', this.onDisconnectedCallback);\r\n        device.addEventListener('gattserverdisconnected', this.onDisconnectedCallback);\r\n        const timeoutError = Symbol();\r\n        if (device.gatt === undefined) {\r\n            throw new Error('No gatt server available.');\r\n        }\r\n        try {\r\n            const timeout = (_a = options.timeout) !== null && _a !== void 0 ? _a : this.DEFAULT_CONNECTION_TIMEOUT;\r\n            await runWithTimeout(device.gatt.connect(), timeout, timeoutError);\r\n        }\r\n        catch (error) {\r\n            // cancel pending connect call, does not work yet in chromium because of a bug:\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=684073\r\n            await ((_b = device.gatt) === null || _b === void 0 ? void 0 : _b.disconnect());\r\n            if (error === timeoutError) {\r\n                throw new Error('Connection timeout');\r\n            }\r\n            else {\r\n                throw error;\r\n            }\r\n        }\r\n    }\r\n    onDisconnected(event) {\r\n        const deviceId = event.target.id;\r\n        const key = `disconnected|${deviceId}`;\r\n        this.notifyListeners(key, null);\r\n    }\r\n    async createBond(_options) {\r\n        throw this.unavailable('createBond is not available on web.');\r\n    }\r\n    async isBonded(_options) {\r\n        throw this.unavailable('isBonded is not available on web.');\r\n    }\r\n    async disconnect(options) {\r\n        var _a;\r\n        (_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.disconnect();\r\n    }\r\n    async getServices(options) {\r\n        var _a, _b;\r\n        const services = (_b = (await ((_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.getPrimaryServices()))) !== null && _b !== void 0 ? _b : [];\r\n        const bleServices = [];\r\n        for (const service of services) {\r\n            const characteristics = await service.getCharacteristics();\r\n            const bleCharacteristics = [];\r\n            for (const characteristic of characteristics) {\r\n                bleCharacteristics.push({\r\n                    uuid: characteristic.uuid,\r\n                    properties: this.getProperties(characteristic),\r\n                    descriptors: await this.getDescriptors(characteristic),\r\n                });\r\n            }\r\n            bleServices.push({ uuid: service.uuid, characteristics: bleCharacteristics });\r\n        }\r\n        return { services: bleServices };\r\n    }\r\n    async getDescriptors(characteristic) {\r\n        try {\r\n            const descriptors = await characteristic.getDescriptors();\r\n            return descriptors.map((descriptor) => ({\r\n                uuid: descriptor.uuid,\r\n            }));\r\n        }\r\n        catch (_a) {\r\n            return [];\r\n        }\r\n    }\r\n    getProperties(characteristic) {\r\n        return {\r\n            broadcast: characteristic.properties.broadcast,\r\n            read: characteristic.properties.read,\r\n            writeWithoutResponse: characteristic.properties.writeWithoutResponse,\r\n            write: characteristic.properties.write,\r\n            notify: characteristic.properties.notify,\r\n            indicate: characteristic.properties.indicate,\r\n            authenticatedSignedWrites: characteristic.properties.authenticatedSignedWrites,\r\n            reliableWrite: characteristic.properties.reliableWrite,\r\n            writableAuxiliaries: characteristic.properties.writableAuxiliaries,\r\n        };\r\n    }\r\n    async getCharacteristic(options) {\r\n        var _a;\r\n        const service = await ((_a = this.getDeviceFromMap(options.deviceId).gatt) === null || _a === void 0 ? void 0 : _a.getPrimaryService(options === null || options === void 0 ? void 0 : options.service));\r\n        return service === null || service === void 0 ? void 0 : service.getCharacteristic(options === null || options === void 0 ? void 0 : options.characteristic);\r\n    }\r\n    async getDescriptor(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        return characteristic === null || characteristic === void 0 ? void 0 : characteristic.getDescriptor(options === null || options === void 0 ? void 0 : options.descriptor);\r\n    }\r\n    async discoverServices(_options) {\r\n        throw this.unavailable('discoverServices is not available on web.');\r\n    }\r\n    async getMtu(_options) {\r\n        throw this.unavailable('getMtu is not available on web.');\r\n    }\r\n    async requestConnectionPriority(_options) {\r\n        throw this.unavailable('requestConnectionPriority is not available on web.');\r\n    }\r\n    async readRssi(_options) {\r\n        throw this.unavailable('readRssi is not available on web.');\r\n    }\r\n    async read(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        const value = await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.readValue());\r\n        return { value };\r\n    }\r\n    async write(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        let dataView;\r\n        if (typeof options.value === 'string') {\r\n            dataView = hexStringToDataView(options.value);\r\n        }\r\n        else {\r\n            dataView = options.value;\r\n        }\r\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.writeValueWithResponse(dataView));\r\n    }\r\n    async writeWithoutResponse(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        let dataView;\r\n        if (typeof options.value === 'string') {\r\n            dataView = hexStringToDataView(options.value);\r\n        }\r\n        else {\r\n            dataView = options.value;\r\n        }\r\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.writeValueWithoutResponse(dataView));\r\n    }\r\n    async readDescriptor(options) {\r\n        const descriptor = await this.getDescriptor(options);\r\n        const value = await (descriptor === null || descriptor === void 0 ? void 0 : descriptor.readValue());\r\n        return { value };\r\n    }\r\n    async writeDescriptor(options) {\r\n        const descriptor = await this.getDescriptor(options);\r\n        let dataView;\r\n        if (typeof options.value === 'string') {\r\n            dataView = hexStringToDataView(options.value);\r\n        }\r\n        else {\r\n            dataView = options.value;\r\n        }\r\n        await (descriptor === null || descriptor === void 0 ? void 0 : descriptor.writeValue(dataView));\r\n    }\r\n    async startNotifications(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        characteristic === null || characteristic === void 0 ? void 0 : characteristic.removeEventListener('characteristicvaluechanged', this.onCharacteristicValueChangedCallback);\r\n        characteristic === null || characteristic === void 0 ? void 0 : characteristic.addEventListener('characteristicvaluechanged', this.onCharacteristicValueChangedCallback);\r\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.startNotifications());\r\n    }\r\n    onCharacteristicValueChanged(event) {\r\n        var _a, _b;\r\n        const characteristic = event.target;\r\n        const key = `notification|${(_a = characteristic.service) === null || _a === void 0 ? void 0 : _a.device.id}|${(_b = characteristic.service) === null || _b === void 0 ? void 0 : _b.uuid}|${characteristic.uuid}`;\r\n        this.notifyListeners(key, {\r\n            value: characteristic.value,\r\n        });\r\n    }\r\n    async stopNotifications(options) {\r\n        const characteristic = await this.getCharacteristic(options);\r\n        await (characteristic === null || characteristic === void 0 ? void 0 : characteristic.stopNotifications());\r\n    }\r\n    getFilters(options) {\r\n        var _a, _b;\r\n        const filters = [];\r\n        for (const service of (_a = options === null || options === void 0 ? void 0 : options.services) !== null && _a !== void 0 ? _a : []) {\r\n            filters.push({\r\n                services: [service],\r\n                name: options === null || options === void 0 ? void 0 : options.name,\r\n                namePrefix: options === null || options === void 0 ? void 0 : options.namePrefix,\r\n            });\r\n        }\r\n        if (((options === null || options === void 0 ? void 0 : options.name) || (options === null || options === void 0 ? void 0 : options.namePrefix)) && filters.length === 0) {\r\n            filters.push({\r\n                name: options.name,\r\n                namePrefix: options.namePrefix,\r\n            });\r\n        }\r\n        for (const manufacturerData of (_b = options === null || options === void 0 ? void 0 : options.manufacturerData) !== null && _b !== void 0 ? _b : []) {\r\n            // Cast to any to avoid type incompatibility - conversion is handled in bleClient.ts\r\n            filters.push({\r\n                manufacturerData: [manufacturerData],\r\n            });\r\n        }\r\n        // Note: Web Bluetooth API does not support service data in scan filters.\r\n        // Service data filtering will be done client-side in onAdvertisementReceived.\r\n        // We still accept serviceData in options for API consistency across platforms.\r\n        return filters;\r\n    }\r\n    matchesServiceDataFilter(event) {\r\n        var _a;\r\n        const filters = (_a = this.requestBleDeviceOptions) === null || _a === void 0 ? void 0 : _a.serviceData;\r\n        if (!filters || filters.length === 0) {\r\n            return true; // No filters, accept all\r\n        }\r\n        if (!event.serviceData) {\r\n            return false; // No service data in advertisement\r\n        }\r\n        // Check if any filter matches (OR logic)\r\n        for (const filter of filters) {\r\n            const serviceData = event.serviceData.get(filter.serviceUuid);\r\n            if (!serviceData) {\r\n                continue; // This filter doesn't match, try next\r\n            }\r\n            // If we have service data for this UUID\r\n            if (!filter.dataPrefix) {\r\n                return true; // Filter matched by service UUID alone\r\n            }\r\n            // Check data prefix (DataView on web)\r\n            const data = new Uint8Array(serviceData.buffer);\r\n            const prefixView = filter.dataPrefix;\r\n            if (data.length < prefixView.byteLength) {\r\n                continue; // Data too short\r\n            }\r\n            // Apply mask if provided\r\n            if (filter.mask) {\r\n                const maskView = filter.mask;\r\n                let matches = true;\r\n                for (let i = 0; i < prefixView.byteLength; i++) {\r\n                    if ((data[i] & maskView.getUint8(i)) !== (prefixView.getUint8(i) & maskView.getUint8(i))) {\r\n                        matches = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (matches) {\r\n                    return true;\r\n                }\r\n            }\r\n            else {\r\n                // Check if data starts with prefix\r\n                let matches = true;\r\n                for (let i = 0; i < prefixView.byteLength; i++) {\r\n                    if (data[i] !== prefixView.getUint8(i)) {\r\n                        matches = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (matches) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false; // No filter matched\r\n    }\r\n    getDeviceFromMap(deviceId) {\r\n        const device = this.deviceMap.get(deviceId);\r\n        if (device === undefined) {\r\n            throw new Error('Device not found. Call \"requestDevice\", \"requestLEScan\" or \"getDevices\" first.');\r\n        }\r\n        return device;\r\n    }\r\n    getBleDevice(device) {\r\n        var _a;\r\n        const bleDevice = {\r\n            deviceId: device.id,\r\n            // use undefined instead of null if name is not available\r\n            name: (_a = device.name) !== null && _a !== void 0 ? _a : undefined,\r\n        };\r\n        return bleDevice;\r\n    }\r\n}\r\n//# sourceMappingURL=web.js.map"],"names":["runWithTimeout","promise","time","exception","timer","_","reject","BluetoothLeWeb","WebPlugin","options","filters","device","event","_a","_b","_c","deviceId","isNew","result","mapToObject","webUUIDToString","_options","timeoutError","timeout","error","key","services","bleServices","service","characteristics","bleCharacteristics","characteristic","descriptor","dataView","hexStringToDataView","manufacturerData","filter","serviceData","data","prefixView","maskView","matches","i"],"mappings":"2GAAO,eAAeA,EAAeC,EAASC,EAAMC,EAAW,CAC3D,IAAIC,EACJ,OAAO,QAAQ,KAAK,CAChBH,EACA,IAAI,QAAQ,CAACI,EAAGC,IAAW,CACvBF,EAAQ,WAAW,IAAME,EAAOH,CAAS,EAAGD,CAAI,CACpD,CAAC,CACT,CAAK,EAAE,QAAQ,IAAM,aAAaE,CAAK,CAAC,CACxC,CCLO,MAAMG,UAAuBC,CAAU,CAC1C,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,UAAY,IAAI,IACrB,KAAK,kBAAoB,IAAI,IAC7B,KAAK,KAAO,KACZ,KAAK,2BAA6B,IAClC,KAAK,gCAAkC,KAAK,wBAAwB,KAAK,IAAI,EAC7E,KAAK,uBAAyB,KAAK,eAAe,KAAK,IAAI,EAC3D,KAAK,qCAAuC,KAAK,6BAA6B,KAAK,IAAI,CAC3F,CACA,MAAM,YAAa,CACf,GAAI,OAAO,UAAc,KAAe,CAAC,UAAU,UAC/C,MAAM,KAAK,YAAY,kDAAkD,EAG7E,GAAI,CADgB,MAAM,UAAU,UAAU,gBAAe,EAEzD,MAAM,KAAK,YAAY,+BAA+B,CAE9D,CACA,MAAM,WAAY,CAEd,MAAO,CAAE,MAAO,GACpB,CACA,MAAM,eAAgB,CAClB,MAAM,KAAK,YAAY,wCAAwC,CACnE,CACA,MAAM,QAAS,CACX,MAAM,KAAK,YAAY,iCAAiC,CAC5D,CACA,MAAM,SAAU,CACZ,MAAM,KAAK,YAAY,kCAAkC,CAC7D,CACA,MAAM,2BAA4B,CAElC,CACA,MAAM,0BAA2B,CAEjC,CACA,MAAM,mBAAoB,CACtB,MAAM,KAAK,YAAY,4CAA4C,CACvE,CACA,MAAM,sBAAuB,CACzB,MAAM,KAAK,YAAY,+CAA+C,CAC1E,CACA,MAAM,uBAAwB,CAC1B,MAAM,KAAK,YAAY,gDAAgD,CAC3E,CACA,MAAM,iBAAkB,CACpB,MAAM,KAAK,YAAY,0CAA0C,CACrE,CACA,MAAM,mBAAoB,CAE1B,CACA,MAAM,cAAcC,EAAS,CACzB,MAAMC,EAAU,KAAK,WAAWD,CAAO,EACjCE,EAAS,MAAM,UAAU,UAAU,cAAc,CACnD,QAASD,EAAQ,OAASA,EAAU,OACpC,iBAAoED,GAAQ,iBAC5E,iBAAkBC,EAAQ,SAAW,CACjD,CAAS,EACD,YAAK,UAAU,IAAIC,EAAO,GAAIA,CAAM,EAClB,KAAK,aAAaA,CAAM,CAE9C,CACA,MAAM,cAAcF,EAAS,CACzB,KAAK,wBAA0BA,EAC/B,MAAMC,EAAU,KAAK,WAAWD,CAAO,EACvC,MAAM,KAAK,aACX,KAAK,kBAAoB,IAAI,IAC7B,UAAU,UAAU,oBAAoB,wBAAyB,KAAK,+BAA+B,EACrG,UAAU,UAAU,iBAAiB,wBAAyB,KAAK,+BAA+B,EAClG,KAAK,KAAO,MAAM,UAAU,UAAU,cAAc,CAChD,QAASC,EAAQ,OAASA,EAAU,OACpC,wBAAyBA,EAAQ,SAAW,EAC5C,oBAAuED,GAAQ,eAC3F,CAAS,CACL,CACA,wBAAwBG,EAAO,CAC3B,IAAIC,EAAIC,EAAIC,EACZ,MAAMC,EAAWJ,EAAM,OAAO,GAC9B,KAAK,UAAU,IAAII,EAAUJ,EAAM,MAAM,EACzC,MAAMK,EAAQ,CAAC,KAAK,kBAAkB,IAAID,CAAQ,EAElD,GAAM,KAAAH,EAAK,KAAK,2BAA6B,MAAQA,IAAO,SAAkBA,EAAG,aAAgB,CAAC,KAAK,yBAAyBD,CAAK,KAGjIK,GAAW,GAAAH,EAAK,KAAK,2BAA6B,MAAQA,IAAO,SAAkBA,EAAG,iBAAkB,CACxG,KAAK,kBAAkB,IAAIE,EAAU,EAAI,EACzC,MAAML,EAAS,KAAK,aAAaC,EAAM,MAAM,EACvCM,EAAS,CACX,OAAAP,EACA,UAAWA,EAAO,KAClB,KAAMC,EAAM,KACZ,QAASA,EAAM,QACf,iBAAkBO,EAAYP,EAAM,gBAAgB,EACpD,YAAaO,EAAYP,EAAM,WAAW,EAC1C,OAAQG,EAAKH,EAAM,SAAW,MAAQG,IAAO,OAAS,OAASA,EAAG,IAAIK,CAAe,CACrG,EACY,KAAK,gBAAgB,eAAgBF,CAAM,CAC/C,CACJ,CACA,MAAM,YAAa,CACf,IAAIL,EACC,GAAAA,EAAK,KAAK,QAAU,MAAQA,IAAO,SAAkBA,EAAG,QACzD,KAAK,KAAK,OAEd,KAAK,KAAO,IAChB,CACA,MAAM,WAAWJ,EAAS,CAStB,MAAO,CAAE,SARO,MAAM,UAAU,UAAU,WAAU,GAE/C,OAAQE,GAAWF,EAAQ,UAAU,SAASE,EAAO,EAAE,CAAC,EACxD,IAAKA,IACN,KAAK,UAAU,IAAIA,EAAO,GAAIA,CAAM,EAClB,KAAK,aAAaA,CAAM,EAE7C,EAEL,CACA,MAAM,oBAAoBU,EAAU,CAYhC,MAAO,CAAE,SAXO,MAAM,UAAU,UAAU,WAAU,GAE/C,OAAQV,GAAW,CACpB,IAAIE,EACJ,OAAQA,EAAKF,EAAO,QAAU,MAAQE,IAAO,OAAS,OAASA,EAAG,SACtE,CAAC,EACI,IAAKF,IACN,KAAK,UAAU,IAAIA,EAAO,GAAIA,CAAM,EAClB,KAAK,aAAaA,CAAM,EAE7C,EAEL,CACA,MAAM,kBAAmB,CACrB,MAAO,EACX,CACA,MAAM,QAAQF,EAAS,CACnB,IAAII,EAAIC,EACR,MAAMH,EAAS,KAAK,iBAAiBF,EAAQ,QAAQ,EACrDE,EAAO,oBAAoB,yBAA0B,KAAK,sBAAsB,EAChFA,EAAO,iBAAiB,yBAA0B,KAAK,sBAAsB,EAC7E,MAAMW,EAAe,SACrB,GAAIX,EAAO,OAAS,OAChB,MAAM,IAAI,MAAM,2BAA2B,EAE/C,GAAI,CACA,MAAMY,GAAWV,EAAKJ,EAAQ,WAAa,MAAQI,IAAO,OAASA,EAAK,KAAK,2BAC7E,MAAMb,EAAeW,EAAO,KAAK,QAAO,EAAIY,EAASD,CAAY,CACrE,OACOE,EAAO,CAIV,MADA,OAAQV,EAAKH,EAAO,QAAU,MAAQG,IAAO,OAAS,OAASA,EAAG,WAAU,GACxEU,IAAUF,EACJ,IAAI,MAAM,oBAAoB,EAG9BE,CAEd,CACJ,CACA,eAAeZ,EAAO,CAElB,MAAMa,EAAM,gBADKb,EAAM,OAAO,EACM,GACpC,KAAK,gBAAgBa,EAAK,IAAI,CAClC,CACA,MAAM,WAAWJ,EAAU,CACvB,MAAM,KAAK,YAAY,qCAAqC,CAChE,CACA,MAAM,SAASA,EAAU,CACrB,MAAM,KAAK,YAAY,mCAAmC,CAC9D,CACA,MAAM,WAAWZ,EAAS,CACtB,IAAII,GACHA,EAAK,KAAK,iBAAiBJ,EAAQ,QAAQ,EAAE,QAAU,MAAQI,IAAO,QAAkBA,EAAG,WAAU,CAC1G,CACA,MAAM,YAAYJ,EAAS,CACvB,IAAII,EAAIC,EACR,MAAMY,GAAYZ,EAAM,OAAQD,EAAK,KAAK,iBAAiBJ,EAAQ,QAAQ,EAAE,QAAU,MAAQI,IAAO,OAAS,OAASA,EAAG,mBAAkB,MAAU,MAAQC,IAAO,OAASA,EAAK,CAAA,EAC9Ka,EAAc,CAAA,EACpB,UAAWC,KAAWF,EAAU,CAC5B,MAAMG,EAAkB,MAAMD,EAAQ,qBAChCE,EAAqB,CAAA,EAC3B,UAAWC,KAAkBF,EACzBC,EAAmB,KAAK,CACpB,KAAMC,EAAe,KACrB,WAAY,KAAK,cAAcA,CAAc,EAC7C,YAAa,MAAM,KAAK,eAAeA,CAAc,CACzE,CAAiB,EAELJ,EAAY,KAAK,CAAE,KAAMC,EAAQ,KAAM,gBAAiBE,CAAkB,CAAE,CAChF,CACA,MAAO,CAAE,SAAUH,EACvB,CACA,MAAM,eAAeI,EAAgB,CACjC,GAAI,CAEA,OADoB,MAAMA,EAAe,kBACtB,IAAKC,IAAgB,CACpC,KAAMA,EAAW,IACjC,EAAc,CACN,MACW,CACP,MAAO,EACX,CACJ,CACA,cAAcD,EAAgB,CAC1B,MAAO,CACH,UAAWA,EAAe,WAAW,UACrC,KAAMA,EAAe,WAAW,KAChC,qBAAsBA,EAAe,WAAW,qBAChD,MAAOA,EAAe,WAAW,MACjC,OAAQA,EAAe,WAAW,OAClC,SAAUA,EAAe,WAAW,SACpC,0BAA2BA,EAAe,WAAW,0BACrD,cAAeA,EAAe,WAAW,cACzC,oBAAqBA,EAAe,WAAW,mBAC3D,CACI,CACA,MAAM,kBAAkBtB,EAAS,CAC7B,IAAII,EACJ,MAAMe,EAAU,OAAQf,EAAK,KAAK,iBAAiBJ,EAAQ,QAAQ,EAAE,QAAU,MAAQI,IAAO,OAAS,OAASA,EAAG,kBAAoEJ,GAAQ,OAAO,GACtM,OAAyDmB,GAAQ,kBAAoEnB,GAAQ,cAAc,CAC/J,CACA,MAAM,cAAcA,EAAS,CACzB,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EAC3D,OAAuEsB,GAAe,cAAgEtB,GAAQ,UAAU,CAC5K,CACA,MAAM,iBAAiBY,EAAU,CAC7B,MAAM,KAAK,YAAY,2CAA2C,CACtE,CACA,MAAM,OAAOA,EAAU,CACnB,MAAM,KAAK,YAAY,iCAAiC,CAC5D,CACA,MAAM,0BAA0BA,EAAU,CACtC,MAAM,KAAK,YAAY,oDAAoD,CAC/E,CACA,MAAM,SAASA,EAAU,CACrB,MAAM,KAAK,YAAY,mCAAmC,CAC9D,CACA,MAAM,KAAKZ,EAAS,CAChB,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EAE3D,MAAO,CAAE,MADK,MAAuEsB,GAAe,UAAS,CAC/F,CAClB,CACA,MAAM,MAAMtB,EAAS,CACjB,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EAC3D,IAAIwB,EACA,OAAOxB,EAAQ,OAAU,SACzBwB,EAAWC,EAAoBzB,EAAQ,KAAK,EAG5CwB,EAAWxB,EAAQ,MAEvB,MAAuEsB,GAAe,uBAAuBE,CAAQ,CACzH,CACA,MAAM,qBAAqBxB,EAAS,CAChC,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EAC3D,IAAIwB,EACA,OAAOxB,EAAQ,OAAU,SACzBwB,EAAWC,EAAoBzB,EAAQ,KAAK,EAG5CwB,EAAWxB,EAAQ,MAEvB,MAAuEsB,GAAe,0BAA0BE,CAAQ,CAC5H,CACA,MAAM,eAAexB,EAAS,CAC1B,MAAMuB,EAAa,MAAM,KAAK,cAAcvB,CAAO,EAEnD,MAAO,CAAE,MADK,MAA+DuB,GAAW,UAAS,CACnF,CAClB,CACA,MAAM,gBAAgBvB,EAAS,CAC3B,MAAMuB,EAAa,MAAM,KAAK,cAAcvB,CAAO,EACnD,IAAIwB,EACA,OAAOxB,EAAQ,OAAU,SACzBwB,EAAWC,EAAoBzB,EAAQ,KAAK,EAG5CwB,EAAWxB,EAAQ,MAEvB,MAA+DuB,GAAW,WAAWC,CAAQ,CACjG,CACA,MAAM,mBAAmBxB,EAAS,CAC9B,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EACKsB,GAAe,oBAAoB,6BAA8B,KAAK,oCAAoC,EAC1GA,GAAe,iBAAiB,6BAA8B,KAAK,oCAAoC,EACvK,MAAuEA,GAAe,mBAAkB,CAC5G,CACA,6BAA6BnB,EAAO,CAChC,IAAIC,EAAIC,EACR,MAAMiB,EAAiBnB,EAAM,OACvBa,EAAM,iBAAiBZ,EAAKkB,EAAe,WAAa,MAAQlB,IAAO,OAAS,OAASA,EAAG,OAAO,EAAE,KAAKC,EAAKiB,EAAe,WAAa,MAAQjB,IAAO,OAAS,OAASA,EAAG,IAAI,IAAIiB,EAAe,IAAI,GAChN,KAAK,gBAAgBN,EAAK,CACtB,MAAOM,EAAe,KAClC,CAAS,CACL,CACA,MAAM,kBAAkBtB,EAAS,CAC7B,MAAMsB,EAAiB,MAAM,KAAK,kBAAkBtB,CAAO,EAC3D,MAAuEsB,GAAe,kBAAiB,CAC3G,CACA,WAAWtB,EAAS,CAChB,IAAII,EAAIC,EACR,MAAMJ,EAAU,CAAA,EAChB,UAAWkB,KAAYf,EAAuDJ,GAAQ,YAAc,MAAQI,IAAO,OAASA,EAAK,GAC7HH,EAAQ,KAAK,CACT,SAAU,CAACkB,CAAO,EAClB,KAAwDnB,GAAQ,KAChE,WAA8DA,GAAQ,UACtF,CAAa,GAEmDA,GAAQ,MAA4DA,GAAQ,aAAgBC,EAAQ,SAAW,GACnKA,EAAQ,KAAK,CACT,KAAMD,EAAQ,KACd,WAAYA,EAAQ,UACpC,CAAa,EAEL,UAAW0B,KAAqBrB,EAAuDL,GAAQ,oBAAsB,MAAQK,IAAO,OAASA,EAAK,GAE9IJ,EAAQ,KAAK,CACT,iBAAkB,CAACyB,CAAgB,CACnD,CAAa,EAKL,OAAOzB,CACX,CACA,yBAAyBE,EAAO,CAC5B,IAAIC,EACJ,MAAMH,GAAWG,EAAK,KAAK,2BAA6B,MAAQA,IAAO,OAAS,OAASA,EAAG,YAC5F,GAAI,CAACH,GAAWA,EAAQ,SAAW,EAC/B,MAAO,GAEX,GAAI,CAACE,EAAM,YACP,MAAO,GAGX,UAAWwB,KAAU1B,EAAS,CAC1B,MAAM2B,EAAczB,EAAM,YAAY,IAAIwB,EAAO,WAAW,EAC5D,GAAI,CAACC,EACD,SAGJ,GAAI,CAACD,EAAO,WACR,MAAO,GAGX,MAAME,EAAO,IAAI,WAAWD,EAAY,MAAM,EACxCE,EAAaH,EAAO,WAC1B,GAAI,EAAAE,EAAK,OAASC,EAAW,YAI7B,GAAIH,EAAO,KAAM,CACb,MAAMI,EAAWJ,EAAO,KACxB,IAAIK,EAAU,GACd,QAASC,EAAI,EAAGA,EAAIH,EAAW,WAAYG,IACvC,IAAKJ,EAAKI,CAAC,EAAIF,EAAS,SAASE,CAAC,MAAQH,EAAW,SAASG,CAAC,EAAIF,EAAS,SAASE,CAAC,GAAI,CACtFD,EAAU,GACV,KACJ,CAEJ,GAAIA,EACA,MAAO,EAEf,KACK,CAED,IAAIA,EAAU,GACd,QAASC,EAAI,EAAGA,EAAIH,EAAW,WAAYG,IACvC,GAAIJ,EAAKI,CAAC,IAAMH,EAAW,SAASG,CAAC,EAAG,CACpCD,EAAU,GACV,KACJ,CAEJ,GAAIA,EACA,MAAO,EAEf,CACJ,CACA,MAAO,EACX,CACA,iBAAiBzB,EAAU,CACvB,MAAML,EAAS,KAAK,UAAU,IAAIK,CAAQ,EAC1C,GAAIL,IAAW,OACX,MAAM,IAAI,MAAM,gFAAgF,EAEpG,OAAOA,CACX,CACA,aAAaA,EAAQ,CACjB,IAAIE,EAMJ,MALkB,CACd,SAAUF,EAAO,GAEjB,MAAOE,EAAKF,EAAO,QAAU,MAAQE,IAAO,OAASA,EAAK,MACtE,CAEI,CACJ","x_google_ignoreList":[0,1]}