{"version":3,"file":"mock-DGG0-SkM.js","sources":["../../src/services/bluetooth/mock.ts"],"sourcesContent":["import type {\n  SensorConnection,\n  ConnectionStatus\n} from '../../types/bluetooth.js';\nimport type { Measurement } from '../../types/measurements.js';\n\n// Aligning types with actual project types\n// Project uses SensorConnection interface, not BluetoothSensor class\n\nexport class MockSensorConnection implements SensorConnection {\n  public id: string;\n  public deviceName?: string;\n  public type: 'power' | 'heartrate' | 'cadence' | 'treadmill';\n\n  private _disconnectCallbacks: (() => void)[] = [];\n  private _statusCallbacks: ((status: ConnectionStatus) => void)[] = [];\n  private _dataCallbacks: ((data: Measurement) => void)[] = [];\n  private _interval: any;\n\n  constructor(type: 'power' | 'heartrate' | 'cadence' | 'treadmill', name = 'Mock Sensor') {\n    this.id = `mock-${type}-${Date.now()}`;\n    this.type = type;\n    this.deviceName = name;\n  }\n\n  async connect(): Promise<boolean> {\n    await this.delay(100);\n    this.notifyStatus('connected');\n    this.startSimulation();\n    return true;\n  }\n\n  disconnect(): void {\n    this.stopSimulation();\n    this.notifyStatus('disconnected');\n    this._disconnectCallbacks.forEach(cb => cb());\n  }\n\n  startSimulation() {\n    if (this._interval) return;\n    this._interval = setInterval(() => this.emitRandomData(), 1000);\n    this.emitRandomData(); // Emit one immediately\n  }\n\n  stopSimulation() {\n    if (this._interval) clearInterval(this._interval);\n    this._interval = null;\n  }\n\n  emitRandomData() {\n    // Base implementation does nothing\n  }\n\n  onDisconnect(callback: () => void): void {\n    this._disconnectCallbacks.push(callback);\n  }\n\n  onStatusChange(callback: (status: ConnectionStatus) => void): void {\n    this._statusCallbacks.push(callback);\n  }\n\n  addListener(callback: (data: Measurement) => void): void {\n    this._dataCallbacks.push(callback);\n  }\n\n  // Helpers\n  private delay(ms: number) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  private notifyStatus(status: ConnectionStatus) {\n    this._statusCallbacks.forEach(cb => cb(status));\n  }\n\n  public simulateData(data: any) {\n    this._dataCallbacks.forEach(cb => cb(data));\n  }\n\n  public simulateDisconnect() {\n    this.disconnect();\n  }\n}\n\nexport class MockPowerSensor extends MockSensorConnection {\n  constructor() { super('power', 'Mock Power'); }\n\n  emitRandomData() {\n    this.simulateData({\n      power: Math.floor(200 + Math.random() * 50),\n      cadence: Math.floor(85 + Math.random() * 5),\n      timestamp: Date.now()\n    });\n  }\n}\n\nexport class MockHeartrateSensor extends MockSensorConnection {\n  constructor() { super('heartrate', 'Mock HR'); }\n}\n\nexport class MockCadenceSensor extends MockSensorConnection {\n  constructor() { super('cadence', 'Mock Cadence'); }\n}\n\nexport const createMockSensor = (type: 'power' | 'heartrate' | 'cadence' | 'treadmill') => {\n  return new MockSensorConnection(type);\n};\n"],"names":["MockSensorConnection","type","name","cb","callback","ms","resolve","status","data","MockPowerSensor","MockHeartrateSensor","MockCadenceSensor"],"mappings":"AASO,MAAMA,CAAiD,CACrD,GACA,WACA,KAEC,qBAAuC,CAAA,EACvC,iBAA2D,CAAA,EAC3D,eAAkD,CAAA,EAClD,UAER,YAAYC,EAAuDC,EAAO,cAAe,CACvF,KAAK,GAAK,QAAQD,CAAI,IAAI,KAAK,KAAK,GACpC,KAAK,KAAOA,EACZ,KAAK,WAAaC,CACpB,CAEA,MAAM,SAA4B,CAChC,aAAM,KAAK,MAAM,GAAG,EACpB,KAAK,aAAa,WAAW,EAC7B,KAAK,gBAAA,EACE,EACT,CAEA,YAAmB,CACjB,KAAK,eAAA,EACL,KAAK,aAAa,cAAc,EAChC,KAAK,qBAAqB,QAAQC,GAAMA,EAAA,CAAI,CAC9C,CAEA,iBAAkB,CACZ,KAAK,YACT,KAAK,UAAY,YAAY,IAAM,KAAK,eAAA,EAAkB,GAAI,EAC9D,KAAK,eAAA,EACP,CAEA,gBAAiB,CACX,KAAK,WAAW,cAAc,KAAK,SAAS,EAChD,KAAK,UAAY,IACnB,CAEA,gBAAiB,CAEjB,CAEA,aAAaC,EAA4B,CACvC,KAAK,qBAAqB,KAAKA,CAAQ,CACzC,CAEA,eAAeA,EAAoD,CACjE,KAAK,iBAAiB,KAAKA,CAAQ,CACrC,CAEA,YAAYA,EAA6C,CACvD,KAAK,eAAe,KAAKA,CAAQ,CACnC,CAGQ,MAAMC,EAAY,CACxB,OAAO,IAAI,QAAQC,GAAW,WAAWA,EAASD,CAAE,CAAC,CACvD,CAEQ,aAAaE,EAA0B,CAC7C,KAAK,iBAAiB,QAAQJ,GAAMA,EAAGI,CAAM,CAAC,CAChD,CAEO,aAAaC,EAAW,CAC7B,KAAK,eAAe,QAAQL,GAAMA,EAAGK,CAAI,CAAC,CAC5C,CAEO,oBAAqB,CAC1B,KAAK,WAAA,CACP,CACF,CAEO,MAAMC,UAAwBT,CAAqB,CACxD,aAAc,CAAE,MAAM,QAAS,YAAY,CAAG,CAE9C,gBAAiB,CACf,KAAK,aAAa,CAChB,MAAO,KAAK,MAAM,IAAM,KAAK,OAAA,EAAW,EAAE,EAC1C,QAAS,KAAK,MAAM,GAAK,KAAK,OAAA,EAAW,CAAC,EAC1C,UAAW,KAAK,IAAA,CAAI,CACrB,CACH,CACF,CAEO,MAAMU,UAA4BV,CAAqB,CAC5D,aAAc,CAAE,MAAM,YAAa,SAAS,CAAG,CACjD,CAEO,MAAMW,UAA0BX,CAAqB,CAC1D,aAAc,CAAE,MAAM,UAAW,cAAc,CAAG,CACpD"}