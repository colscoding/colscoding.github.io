{"version":3,"file":"mock-DGG0-SkM.js","sources":["../../src/services/bluetooth/mock.ts"],"sourcesContent":["import type { SensorConnection, ConnectionStatus } from '../../types/bluetooth.js';\nimport type { Measurement } from '../../types/measurements.js';\n\n// Aligning types with actual project types\n// Project uses SensorConnection interface, not BluetoothSensor class\n\nexport class MockSensorConnection implements SensorConnection {\n    public id: string;\n    public deviceName?: string;\n    public type: 'power' | 'heartrate' | 'cadence' | 'treadmill';\n\n    private _disconnectCallbacks: (() => void)[] = [];\n    private _statusCallbacks: ((status: ConnectionStatus) => void)[] = [];\n    private _dataCallbacks: ((data: Measurement) => void)[] = [];\n    private _interval: any;\n\n    constructor(type: 'power' | 'heartrate' | 'cadence' | 'treadmill', name = 'Mock Sensor') {\n        this.id = `mock-${type}-${Date.now()}`;\n        this.type = type;\n        this.deviceName = name;\n    }\n\n    async connect(): Promise<boolean> {\n        await this.delay(100);\n        this.notifyStatus('connected');\n        this.startSimulation();\n        return true;\n    }\n\n    disconnect(): void {\n        this.stopSimulation();\n        this.notifyStatus('disconnected');\n        this._disconnectCallbacks.forEach((cb) => cb());\n    }\n\n    startSimulation() {\n        if (this._interval) return;\n        this._interval = setInterval(() => this.emitRandomData(), 1000);\n        this.emitRandomData(); // Emit one immediately\n    }\n\n    stopSimulation() {\n        if (this._interval) clearInterval(this._interval);\n        this._interval = null;\n    }\n\n    emitRandomData() {\n        // Base implementation does nothing\n    }\n\n    onDisconnect(callback: () => void): void {\n        this._disconnectCallbacks.push(callback);\n    }\n\n    onStatusChange(callback: (status: ConnectionStatus) => void): void {\n        this._statusCallbacks.push(callback);\n    }\n\n    addListener(callback: (data: Measurement) => void): void {\n        this._dataCallbacks.push(callback);\n    }\n\n    // Helpers\n    private delay(ms: number) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n\n    private notifyStatus(status: ConnectionStatus) {\n        this._statusCallbacks.forEach((cb) => cb(status));\n    }\n\n    public simulateData(data: any) {\n        this._dataCallbacks.forEach((cb) => cb(data));\n    }\n\n    public simulateDisconnect() {\n        this.disconnect();\n    }\n}\n\nexport class MockPowerSensor extends MockSensorConnection {\n    constructor() {\n        super('power', 'Mock Power');\n    }\n\n    emitRandomData() {\n        this.simulateData({\n            power: Math.floor(200 + Math.random() * 50),\n            cadence: Math.floor(85 + Math.random() * 5),\n            timestamp: Date.now(),\n        });\n    }\n}\n\nexport class MockHeartrateSensor extends MockSensorConnection {\n    constructor() {\n        super('heartrate', 'Mock HR');\n    }\n}\n\nexport class MockCadenceSensor extends MockSensorConnection {\n    constructor() {\n        super('cadence', 'Mock Cadence');\n    }\n}\n\nexport const createMockSensor = (type: 'power' | 'heartrate' | 'cadence' | 'treadmill') => {\n    return new MockSensorConnection(type);\n};\n"],"names":["MockSensorConnection","type","name","cb","callback","ms","resolve","status","data","MockPowerSensor","MockHeartrateSensor","MockCadenceSensor"],"mappings":"AAMO,MAAMA,CAAiD,CACnD,GACA,WACA,KAEC,qBAAuC,CAAA,EACvC,iBAA2D,CAAA,EAC3D,eAAkD,CAAA,EAClD,UAER,YAAYC,EAAuDC,EAAO,cAAe,CACrF,KAAK,GAAK,QAAQD,CAAI,IAAI,KAAK,KAAK,GACpC,KAAK,KAAOA,EACZ,KAAK,WAAaC,CACtB,CAEA,MAAM,SAA4B,CAC9B,aAAM,KAAK,MAAM,GAAG,EACpB,KAAK,aAAa,WAAW,EAC7B,KAAK,gBAAA,EACE,EACX,CAEA,YAAmB,CACf,KAAK,eAAA,EACL,KAAK,aAAa,cAAc,EAChC,KAAK,qBAAqB,QAASC,GAAOA,GAAI,CAClD,CAEA,iBAAkB,CACV,KAAK,YACT,KAAK,UAAY,YAAY,IAAM,KAAK,eAAA,EAAkB,GAAI,EAC9D,KAAK,eAAA,EACT,CAEA,gBAAiB,CACT,KAAK,WAAW,cAAc,KAAK,SAAS,EAChD,KAAK,UAAY,IACrB,CAEA,gBAAiB,CAEjB,CAEA,aAAaC,EAA4B,CACrC,KAAK,qBAAqB,KAAKA,CAAQ,CAC3C,CAEA,eAAeA,EAAoD,CAC/D,KAAK,iBAAiB,KAAKA,CAAQ,CACvC,CAEA,YAAYA,EAA6C,CACrD,KAAK,eAAe,KAAKA,CAAQ,CACrC,CAGQ,MAAMC,EAAY,CACtB,OAAO,IAAI,QAASC,GAAY,WAAWA,EAASD,CAAE,CAAC,CAC3D,CAEQ,aAAaE,EAA0B,CAC3C,KAAK,iBAAiB,QAASJ,GAAOA,EAAGI,CAAM,CAAC,CACpD,CAEO,aAAaC,EAAW,CAC3B,KAAK,eAAe,QAASL,GAAOA,EAAGK,CAAI,CAAC,CAChD,CAEO,oBAAqB,CACxB,KAAK,WAAA,CACT,CACJ,CAEO,MAAMC,UAAwBT,CAAqB,CACtD,aAAc,CACV,MAAM,QAAS,YAAY,CAC/B,CAEA,gBAAiB,CACb,KAAK,aAAa,CACd,MAAO,KAAK,MAAM,IAAM,KAAK,OAAA,EAAW,EAAE,EAC1C,QAAS,KAAK,MAAM,GAAK,KAAK,OAAA,EAAW,CAAC,EAC1C,UAAW,KAAK,IAAA,CAAI,CACvB,CACL,CACJ,CAEO,MAAMU,UAA4BV,CAAqB,CAC1D,aAAc,CACV,MAAM,YAAa,SAAS,CAChC,CACJ,CAEO,MAAMW,UAA0BX,CAAqB,CACxD,aAAc,CACV,MAAM,UAAW,cAAc,CACnC,CACJ"}