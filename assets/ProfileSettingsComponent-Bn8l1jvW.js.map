{"version":3,"file":"ProfileSettingsComponent-Bn8l1jvW.js","sources":["../../src/components/data-fields/ProfileSettingsComponent.ts"],"sourcesContent":["/**\n * Profile Settings Web Component\n *\n * Settings UI for managing activity profiles and data screens.\n * Allows users to:\n * - Select active profile\n * - Enable/disable screens within a profile\n * - Reorder screens\n * - Create new screens\n * - Edit existing screens\n *\n * @example\n * ```typescript\n * const settings = document.createElement('bpt-profile-settings') as ProfileSettingsComponent;\n * settings.addEventListener('profile-changed', (e) => {\n *   console.log('Profile updated:', e.detail.profile);\n * });\n * ```\n *\n * @module components/data-fields/ProfileSettingsComponent\n */\n\nimport type { ActivityProfile, DataScreen } from '../../data-fields/types.js';\nimport { loadDataFieldSettings, saveDataFieldSettings, loadActiveProfile } from '../../data-fields/persistence.js';\nimport { DEFAULT_PROFILES } from '../../data-fields/defaults.js';\nimport { generateScreenId, createEmptyScreen } from '../../data-fields/screens.js';\nimport type { ScreenEditorComponent } from './ScreenEditorComponent.js';\n\n// Ensure ScreenEditor is registered\nimport './ScreenEditorComponent.js';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface ProfileChangedEvent {\n    profile: ActivityProfile;\n}\n\n// ============================================================================\n// Component Definition\n// ============================================================================\n\n/**\n * Profile settings component for managing data screens\n */\nexport class ProfileSettingsComponent extends HTMLElement {\n    private shadow: ShadowRoot;\n    private settings = loadDataFieldSettings();\n    private activeProfile: ActivityProfile;\n    private draggedScreenId: string | null = null;\n    private editingScreen: DataScreen | null = null;\n\n    constructor() {\n        super();\n        this.shadow = this.attachShadow({ mode: 'open' });\n        this.activeProfile = loadActiveProfile();\n    }\n\n    // ========================================================================\n    // Lifecycle\n    // ========================================================================\n\n    connectedCallback(): void {\n        this.render();\n        this.setupEventListeners();\n    }\n\n    disconnectedCallback(): void {\n        this.removeEventListeners();\n    }\n\n    // ========================================================================\n    // Public API\n    // ========================================================================\n\n    /**\n     * Refresh the component with latest settings\n     */\n    public refresh(): void {\n        this.settings = loadDataFieldSettings();\n        this.activeProfile = loadActiveProfile();\n        this.render();\n    }\n\n    // ========================================================================\n    // Rendering\n    // ========================================================================\n\n    private render(): void {\n        this.shadow.innerHTML = `\n            <style>${this.getStyles()}</style>\n            <div class=\"profile-settings\">\n                ${this.renderProfileSelector()}\n                ${this.renderScreensList()}\n                ${this.renderScreenActions()}\n            </div>\n            ${this.renderScreenEditorModal()}\n        `;\n\n        // Re-setup event listeners after render\n        this.setupEventListeners();\n    }\n\n    private renderProfileSelector(): string {\n        const profiles = this.settings.profiles;\n        const activeId = this.settings.activeProfileId;\n\n        return `\n            <div class=\"profile-selector\">\n                <label for=\"profile-select\">Activity Profile:</label>\n                <select id=\"profile-select\" class=\"profile-dropdown\">\n                    ${profiles\n                        .map(\n                            (p) => `\n                        <option value=\"${p.id}\" ${p.id === activeId ? 'selected' : ''}>\n                            ${p.icon} ${p.name}\n                        </option>\n                    `\n                        )\n                        .join('')}\n                </select>\n                <button class=\"btn-icon btn-add-profile\" title=\"Add Profile\" aria-label=\"Add new profile\">\n                    ‚ûï\n                </button>\n            </div>\n            <p class=\"profile-description\">\n                ${this.activeProfile.screens.length} screen${this.activeProfile.screens.length !== 1 ? 's' : ''} ‚Ä¢ \n                Swipe or tap dots to switch screens during workout\n            </p>\n        `;\n    }\n\n    private renderScreensList(): string {\n        const screens = this.activeProfile.screens;\n\n        if (screens.length === 0) {\n            return `\n                <div class=\"screens-empty\">\n                    <p>No screens configured. (Cannot render Profile Settings)</p>\n                    <button class=\"btn-primary btn-add-screen\">‚ûï Add Screen</button>\n                </div>\n            `;\n        }\n\n        return `\n            <div class=\"screens-list\" role=\"list\" aria-label=\"Data screens\">\n                ${screens.map((screen, index) => this.renderScreenItem(screen, index)).join('')}\n            </div>\n        `;\n    }\n\n    private renderScreenItem(screen: DataScreen, index: number): string {\n        const isActive = index === this.activeProfile.activeScreenIndex;\n\n        return `\n            <div class=\"screen-item ${isActive ? 'screen-item--active' : ''}\"\n                 role=\"listitem\"\n                 draggable=\"true\"\n                 data-screen-id=\"${screen.id}\"\n                 data-index=\"${index}\">\n                <div class=\"screen-drag-handle\" aria-hidden=\"true\">‚ãÆ‚ãÆ</div>\n                <div class=\"screen-icon\">${screen.icon}</div>\n                <div class=\"screen-info\">\n                    <div class=\"screen-name\">${screen.name}</div>\n                    <div class=\"screen-details\">${screen.slots.length} field${screen.slots.length !== 1 ? 's' : ''}</div>\n                </div>\n                <div class=\"screen-actions\">\n                    <button class=\"btn-icon btn-edit-screen\" \n                            data-screen-id=\"${screen.id}\"\n                            title=\"Edit screen\"\n                            aria-label=\"Edit ${screen.name} screen\">\n                        ‚úèÔ∏è\n                    </button>\n                    <button class=\"btn-icon btn-duplicate-screen\" \n                            data-screen-id=\"${screen.id}\"\n                            title=\"Duplicate screen\"\n                            aria-label=\"Duplicate ${screen.name} screen\">\n                        üìã\n                    </button>\n                    <button class=\"btn-icon btn-delete-screen ${this.activeProfile.screens.length <= 1 ? 'btn-disabled' : ''}\" \n                            data-screen-id=\"${screen.id}\"\n                            title=\"Delete screen\"\n                            aria-label=\"Delete ${screen.name} screen\"\n                            ${this.activeProfile.screens.length <= 1 ? 'disabled' : ''}>\n                        üóëÔ∏è\n                    </button>\n                </div>\n            </div>\n        `;\n    }\n\n    private renderScreenActions(): string {\n        return `\n            <div class=\"screen-actions-bar\">\n                <button class=\"btn-secondary btn-add-screen\">\n                    ‚ûï Add Screen\n                </button>\n                <button class=\"btn-secondary btn-reset-profile\" title=\"Reset to default screens\">\n                    üîÑ Reset to Defaults\n                </button>\n            </div>\n        `;\n    }\n\n    private renderScreenEditorModal(): string {\n        return `\n            <div class=\"screen-editor-modal\" id=\"screenEditorModal\" style=\"display: none;\">\n                <div class=\"modal-backdrop\"></div>\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h3 id=\"screenEditorTitle\">Edit Screen</h3>\n                        <button class=\"btn-close\" id=\"closeScreenEditor\" aria-label=\"Close\">&times;</button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <bpt-screen-editor id=\"screenEditor\"></bpt-screen-editor>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button class=\"btn-secondary\" id=\"cancelScreenEdit\">Cancel</button>\n                        <button class=\"btn-primary\" id=\"saveScreenEdit\">Save Changes</button>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    private getStyles(): string {\n        return `\n            :host {\n                display: block;\n                font-family: var(--font-family, system-ui, -apple-system, sans-serif);\n            }\n\n            .profile-settings {\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n            }\n\n            /* Profile Selector */\n            .profile-selector {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                flex-wrap: wrap;\n            }\n\n            .profile-selector label {\n                font-weight: 500;\n                font-size: 14px;\n                color: var(--color-text-secondary, #666);\n            }\n\n            .profile-dropdown {\n                flex: 1;\n                min-width: 180px;\n                padding: 8px 12px;\n                border: 1px solid var(--color-border, #d0d7de);\n                border-radius: 6px;\n                font-size: 16px;\n                background: var(--input-bg, white);\n                color: var(--color-text-primary, #1a1a1a);\n            }\n\n            .profile-description {\n                font-size: 13px;\n                color: var(--color-text-secondary, #666);\n                margin: -8px 0 8px;\n            }\n\n            /* Screens List */\n            .screens-list {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n                min-height: 100px;\n            }\n\n            .screens-empty {\n                text-align: center;\n                padding: 24px;\n                background: var(--bg-secondary, #f6f8fa);\n                border-radius: 8px;\n                color: var(--color-text-secondary, #666);\n            }\n\n            .screen-item {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                padding: 12px;\n                background: var(--bg-secondary, #f6f8fa);\n                border: 1px solid var(--color-border, #d0d7de);\n                border-radius: 8px;\n                cursor: grab;\n                transition: all 0.15s ease;\n            }\n\n            .screen-item:hover {\n                border-color: var(--color-primary, #2196F3);\n                background: var(--bg-primary, white);\n            }\n\n            .screen-item--active {\n                border-color: var(--color-primary, #2196F3);\n                border-width: 2px;\n                background: var(--bg-primary, white);\n            }\n\n            .screen-item--dragging {\n                opacity: 0.5;\n                transform: scale(0.98);\n            }\n\n            .screen-item--drag-over {\n                border-style: dashed;\n                border-color: var(--color-primary, #2196F3);\n            }\n\n            .screen-drag-handle {\n                color: var(--color-text-secondary, #666);\n                font-size: 14px;\n                cursor: grab;\n                padding: 4px;\n                user-select: none;\n            }\n\n            .screen-icon {\n                font-size: 24px;\n                width: 36px;\n                text-align: center;\n            }\n\n            .screen-info {\n                flex: 1;\n                min-width: 0;\n            }\n\n            .screen-name {\n                font-weight: 500;\n                font-size: 15px;\n                color: var(--color-text-primary, #1a1a1a);\n            }\n\n            .screen-details {\n                font-size: 13px;\n                color: var(--color-text-secondary, #666);\n            }\n\n            .screen-actions {\n                display: flex;\n                gap: 4px;\n            }\n\n            /* Buttons */\n            .btn-icon {\n                padding: 6px 8px;\n                border: none;\n                background: transparent;\n                cursor: pointer;\n                font-size: 16px;\n                border-radius: 4px;\n                transition: background 0.15s ease;\n            }\n\n            .btn-icon:hover {\n                background: var(--color-border, #d0d7de);\n            }\n\n            .btn-icon.btn-disabled {\n                opacity: 0.4;\n                cursor: not-allowed;\n            }\n\n            .btn-icon.btn-disabled:hover {\n                background: transparent;\n            }\n\n            .btn-primary {\n                padding: 10px 16px;\n                border: none;\n                background: var(--color-primary, #2196F3);\n                color: white;\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 500;\n                cursor: pointer;\n                transition: background 0.15s ease;\n            }\n\n            .btn-primary:hover {\n                background: var(--color-primary-dark, #1976D2);\n            }\n\n            .btn-secondary {\n                padding: 10px 16px;\n                border: 1px solid var(--color-border, #d0d7de);\n                background: var(--bg-primary, white);\n                color: var(--color-text-primary, #1a1a1a);\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 500;\n                cursor: pointer;\n                transition: all 0.15s ease;\n            }\n\n            .btn-secondary:hover {\n                background: var(--bg-secondary, #f6f8fa);\n            }\n\n            .screen-actions-bar {\n                display: flex;\n                gap: 8px;\n                flex-wrap: wrap;\n                padding-top: 8px;\n                border-top: 1px solid var(--color-border, #d0d7de);\n            }\n\n            /* Modal */\n            .screen-editor-modal {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                z-index: 1000;\n            }\n\n            .modal-backdrop {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0, 0, 0, 0.5);\n            }\n\n            .modal-content {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: 90%;\n                max-width: 600px;\n                max-height: 90vh;\n                background: var(--bg-primary, white);\n                border-radius: 12px;\n                display: flex;\n                flex-direction: column;\n                overflow: hidden;\n            }\n\n            .modal-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 16px 20px;\n                border-bottom: 1px solid var(--color-border, #d0d7de);\n            }\n\n            .modal-header h3 {\n                margin: 0;\n                font-size: 18px;\n            }\n\n            .btn-close {\n                padding: 4px 8px;\n                border: none;\n                background: transparent;\n                font-size: 24px;\n                cursor: pointer;\n                color: var(--color-text-secondary, #666);\n            }\n\n            .modal-body {\n                flex: 1;\n                overflow-y: auto;\n                padding: 20px;\n            }\n\n            .modal-footer {\n                display: flex;\n                justify-content: flex-end;\n                gap: 8px;\n                padding: 16px 20px;\n                border-top: 1px solid var(--color-border, #d0d7de);\n            }\n\n            /* Add Profile Dialog */\n            .add-profile-dialog {\n                padding: 20px;\n            }\n\n            .form-group {\n                margin-bottom: 16px;\n            }\n\n            .form-group label {\n                display: block;\n                margin-bottom: 6px;\n                font-weight: 500;\n                font-size: 14px;\n            }\n\n            .form-input {\n                width: 100%;\n                padding: 10px 12px;\n                border: 1px solid var(--color-border, #d0d7de);\n                border-radius: 6px;\n                font-size: 16px;\n            }\n\n            .template-options {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n            }\n\n            .template-option {\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                padding: 12px;\n                border: 1px solid var(--color-border, #d0d7de);\n                border-radius: 8px;\n                cursor: pointer;\n                transition: all 0.15s ease;\n            }\n\n            .template-option:hover {\n                border-color: var(--color-primary, #2196F3);\n            }\n\n            .template-option input {\n                width: 18px;\n                height: 18px;\n            }\n        `;\n    }\n\n    // ========================================================================\n    // Event Handling\n    // ========================================================================\n\n    private setupEventListeners(): void {\n        // Profile selector\n        const profileSelect = this.shadow.getElementById('profile-select') as HTMLSelectElement;\n        profileSelect?.addEventListener('change', this.handleProfileChange.bind(this));\n\n        // Add profile button\n        const addProfileBtn = this.shadow.querySelector('.btn-add-profile');\n        addProfileBtn?.addEventListener('click', this.handleAddProfile.bind(this));\n\n        // Add screen button\n        const addScreenBtns = this.shadow.querySelectorAll('.btn-add-screen');\n        addScreenBtns.forEach((btn) => btn.addEventListener('click', this.handleAddScreen.bind(this)));\n\n        // Reset profile button\n        const resetBtn = this.shadow.querySelector('.btn-reset-profile');\n        resetBtn?.addEventListener('click', this.handleResetProfile.bind(this));\n\n        // Screen item actions\n        this.shadow.querySelectorAll('.btn-edit-screen').forEach((btn) => {\n            btn.addEventListener('click', this.handleEditScreen.bind(this));\n        });\n\n        this.shadow.querySelectorAll('.btn-duplicate-screen').forEach((btn) => {\n            btn.addEventListener('click', this.handleDuplicateScreen.bind(this));\n        });\n\n        this.shadow.querySelectorAll('.btn-delete-screen').forEach((btn) => {\n            btn.addEventListener('click', this.handleDeleteScreen.bind(this));\n        });\n\n        // Drag and drop - cast Event to DragEvent in wrappers\n        this.shadow.querySelectorAll('.screen-item').forEach((item) => {\n            const htmlItem = item as HTMLElement;\n            htmlItem.addEventListener('dragstart', (e: Event) => this.handleDragStart(e as DragEvent));\n            htmlItem.addEventListener('dragend', (e: Event) => this.handleDragEnd(e as DragEvent));\n            htmlItem.addEventListener('dragover', (e: Event) => this.handleDragOver(e as DragEvent));\n            htmlItem.addEventListener('dragleave', (e: Event) => this.handleDragLeave(e as DragEvent));\n            htmlItem.addEventListener('drop', (e: Event) => this.handleDrop(e as DragEvent));\n        });\n\n        // Modal controls\n        const closeBtn = this.shadow.getElementById('closeScreenEditor');\n        closeBtn?.addEventListener('click', this.closeScreenEditor.bind(this));\n\n        const cancelBtn = this.shadow.getElementById('cancelScreenEdit');\n        cancelBtn?.addEventListener('click', this.closeScreenEditor.bind(this));\n\n        const saveBtn = this.shadow.getElementById('saveScreenEdit');\n        saveBtn?.addEventListener('click', this.handleSaveScreen.bind(this));\n\n        const backdrop = this.shadow.querySelector('.modal-backdrop');\n        backdrop?.addEventListener('click', this.closeScreenEditor.bind(this));\n    }\n\n    private removeEventListeners(): void {\n        // Event listeners are cleaned up when shadow DOM is replaced\n    }\n\n    // ========================================================================\n    // Profile Actions\n    // ========================================================================\n\n    private handleProfileChange(e: Event): void {\n        const select = e.target as HTMLSelectElement;\n        const profileId = select.value;\n\n        this.settings.activeProfileId = profileId;\n        saveDataFieldSettings(this.settings);\n\n        const profile = this.settings.profiles.find((p) => p.id === profileId);\n        if (profile) {\n            this.activeProfile = profile;\n            this.render();\n            this.dispatchProfileChanged();\n        }\n    }\n\n    private handleAddProfile(): void {\n        const name = prompt('Enter profile name:', 'My Profile');\n        if (!name) return;\n\n        // Find a template to use\n        const templateProfile = DEFAULT_PROFILES.find((p) => p.activityType === 'cycling') || DEFAULT_PROFILES[0];\n\n        const newProfile: ActivityProfile = {\n            id: `profile-${Date.now()}`,\n            name,\n            activityType: templateProfile.activityType,\n            icon: templateProfile.icon,\n            screens: JSON.parse(JSON.stringify(templateProfile.screens)),\n            activeScreenIndex: 0,\n        };\n\n        this.settings.profiles.push(newProfile);\n        this.settings.activeProfileId = newProfile.id;\n        saveDataFieldSettings(this.settings);\n\n        this.activeProfile = newProfile;\n        this.render();\n        this.dispatchProfileChanged();\n    }\n\n    private handleResetProfile(): void {\n        if (!confirm('Reset all screens to defaults? Your custom screens will be lost.')) {\n            return;\n        }\n\n        const defaultProfile =\n            DEFAULT_PROFILES.find((p) => p.activityType === this.activeProfile.activityType) || DEFAULT_PROFILES[0];\n\n        this.activeProfile.screens = JSON.parse(JSON.stringify(defaultProfile.screens));\n        this.activeProfile.activeScreenIndex = 0;\n        this.saveCurrentProfile();\n        this.render();\n        this.dispatchProfileChanged();\n    }\n\n    // ========================================================================\n    // Screen Actions\n    // ========================================================================\n\n    private handleAddScreen(): void {\n        const newScreen = createEmptyScreen(`Screen ${this.activeProfile.screens.length + 1}`, 'üìä');\n        this.activeProfile.screens.push(newScreen);\n        this.saveCurrentProfile();\n        this.render();\n        this.dispatchProfileChanged();\n\n        // Open editor for the new screen\n        this.openScreenEditor(newScreen, true);\n    }\n\n    private handleEditScreen(e: Event): void {\n        const btn = e.currentTarget as HTMLElement;\n        const screenId = btn.dataset.screenId;\n        const screen = this.activeProfile.screens.find((s) => s.id === screenId);\n        if (screen) {\n            this.openScreenEditor(screen, false);\n        }\n    }\n\n    private handleDuplicateScreen(e: Event): void {\n        const btn = e.currentTarget as HTMLElement;\n        const screenId = btn.dataset.screenId;\n        const screen = this.activeProfile.screens.find((s) => s.id === screenId);\n\n        if (screen) {\n            const duplicate: DataScreen = {\n                ...JSON.parse(JSON.stringify(screen)),\n                id: generateScreenId(),\n                name: `${screen.name} (Copy)`,\n            };\n            this.activeProfile.screens.push(duplicate);\n            this.saveCurrentProfile();\n            this.render();\n            this.dispatchProfileChanged();\n        }\n    }\n\n    private handleDeleteScreen(e: Event): void {\n        const btn = e.currentTarget as HTMLElement;\n        if (btn.classList.contains('btn-disabled')) return;\n\n        const screenId = btn.dataset.screenId;\n        const screen = this.activeProfile.screens.find((s) => s.id === screenId);\n\n        if (screen && confirm(`Delete \"${screen.name}\" screen?`)) {\n            const index = this.activeProfile.screens.findIndex((s) => s.id === screenId);\n            this.activeProfile.screens.splice(index, 1);\n\n            // Adjust active index if needed\n            if (this.activeProfile.activeScreenIndex >= this.activeProfile.screens.length) {\n                this.activeProfile.activeScreenIndex = Math.max(0, this.activeProfile.screens.length - 1);\n            }\n\n            this.saveCurrentProfile();\n            this.render();\n            this.dispatchProfileChanged();\n        }\n    }\n\n    // ========================================================================\n    // Drag and Drop\n    // ========================================================================\n\n    private handleDragStart(e: DragEvent): void {\n        const item = e.currentTarget as HTMLElement;\n        item.classList.add('screen-item--dragging');\n        this.draggedScreenId = item.dataset.screenId || null;\n\n        if (e.dataTransfer) {\n            e.dataTransfer.effectAllowed = 'move';\n            e.dataTransfer.setData('text/plain', this.draggedScreenId || '');\n        }\n    }\n\n    private handleDragEnd(e: DragEvent): void {\n        const item = e.currentTarget as HTMLElement;\n        item.classList.remove('screen-item--dragging');\n        this.draggedScreenId = null;\n\n        // Remove all drag-over classes\n        this.shadow.querySelectorAll('.screen-item--drag-over').forEach((el) => {\n            el.classList.remove('screen-item--drag-over');\n        });\n    }\n\n    private handleDragOver(e: DragEvent): void {\n        e.preventDefault();\n        const item = e.currentTarget as HTMLElement;\n        if (item.dataset.screenId !== this.draggedScreenId) {\n            item.classList.add('screen-item--drag-over');\n        }\n    }\n\n    private handleDragLeave(e: DragEvent): void {\n        const item = e.currentTarget as HTMLElement;\n        item.classList.remove('screen-item--drag-over');\n    }\n\n    private handleDrop(e: DragEvent): void {\n        e.preventDefault();\n        const dropTarget = e.currentTarget as HTMLElement;\n        dropTarget.classList.remove('screen-item--drag-over');\n\n        const draggedId = this.draggedScreenId;\n        const targetId = dropTarget.dataset.screenId;\n\n        if (draggedId && targetId && draggedId !== targetId) {\n            const screens = this.activeProfile.screens;\n            const draggedIndex = screens.findIndex((s) => s.id === draggedId);\n            const targetIndex = screens.findIndex((s) => s.id === targetId);\n\n            if (draggedIndex !== -1 && targetIndex !== -1) {\n                // Reorder screens\n                const [draggedScreen] = screens.splice(draggedIndex, 1);\n                screens.splice(targetIndex, 0, draggedScreen);\n\n                // Update active screen index if needed\n                if (this.activeProfile.activeScreenIndex === draggedIndex) {\n                    this.activeProfile.activeScreenIndex = targetIndex;\n                } else if (\n                    this.activeProfile.activeScreenIndex > draggedIndex &&\n                    this.activeProfile.activeScreenIndex <= targetIndex\n                ) {\n                    this.activeProfile.activeScreenIndex--;\n                } else if (\n                    this.activeProfile.activeScreenIndex < draggedIndex &&\n                    this.activeProfile.activeScreenIndex >= targetIndex\n                ) {\n                    this.activeProfile.activeScreenIndex++;\n                }\n\n                this.saveCurrentProfile();\n                this.render();\n                this.dispatchProfileChanged();\n            }\n        }\n    }\n\n    // ========================================================================\n    // Screen Editor Modal\n    // ========================================================================\n\n    private openScreenEditor(screen: DataScreen, isNew: boolean): void {\n        this.editingScreen = screen;\n\n        const modal = this.shadow.getElementById('screenEditorModal');\n        const title = this.shadow.getElementById('screenEditorTitle');\n        const editor = this.shadow.getElementById('screenEditor') as ScreenEditorComponent;\n\n        if (modal && title && editor) {\n            title.textContent = isNew ? 'New Screen' : `Edit: ${screen.name}`;\n            editor.setScreen(screen);\n            modal.style.display = 'block';\n        }\n    }\n\n    private closeScreenEditor(): void {\n        const modal = this.shadow.getElementById('screenEditorModal');\n        if (modal) {\n            modal.style.display = 'none';\n        }\n        this.editingScreen = null;\n    }\n\n    private handleSaveScreen(): void {\n        const editor = this.shadow.getElementById('screenEditor') as ScreenEditorComponent;\n        const updatedScreen = editor?.getScreen();\n\n        if (updatedScreen && this.editingScreen) {\n            const index = this.activeProfile.screens.findIndex((s) => s.id === this.editingScreen!.id);\n\n            if (index !== -1) {\n                this.activeProfile.screens[index] = updatedScreen;\n            } else {\n                // New screen - already added when created\n                const newIndex = this.activeProfile.screens.findIndex((s) => s.id === updatedScreen.id);\n                if (newIndex !== -1) {\n                    this.activeProfile.screens[newIndex] = updatedScreen;\n                }\n            }\n\n            this.saveCurrentProfile();\n            this.closeScreenEditor();\n            this.render();\n            this.dispatchProfileChanged();\n        }\n    }\n\n    // ========================================================================\n    // Persistence & Events\n    // ========================================================================\n\n    private saveCurrentProfile(): void {\n        const index = this.settings.profiles.findIndex((p) => p.id === this.activeProfile.id);\n        if (index !== -1) {\n            this.settings.profiles[index] = this.activeProfile;\n            saveDataFieldSettings(this.settings);\n        }\n    }\n\n    private dispatchProfileChanged(): void {\n        const event = new CustomEvent<ProfileChangedEvent>('profile-changed', {\n            detail: { profile: this.activeProfile },\n            bubbles: true,\n            composed: true,\n        });\n        this.dispatchEvent(event);\n\n        // Also dispatch to document for other listeners\n        document.dispatchEvent(\n            new CustomEvent('data-fields-profile-changed', {\n                detail: { profile: this.activeProfile },\n            })\n        );\n    }\n}\n\n// Register the custom element\nif (!customElements.get('bpt-profile-settings')) {\n    customElements.define('bpt-profile-settings', ProfileSettingsComponent);\n}\n"],"names":["ProfileSettingsComponent","loadDataFieldSettings","loadActiveProfile","profiles","activeId","p","screens","screen","index","btn","item","htmlItem","e","profileId","saveDataFieldSettings","profile","name","templateProfile","DEFAULT_PROFILES","newProfile","defaultProfile","newScreen","createEmptyScreen","screenId","s","duplicate","generateScreenId","el","dropTarget","draggedId","targetId","draggedIndex","targetIndex","draggedScreen","isNew","modal","title","editor","updatedScreen","newIndex","event"],"mappings":"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"}