{"version":3,"file":"ZoneGauge-Bbx5ui-s.js","sources":["../../src/components/ZoneGauge.ts"],"sourcesContent":["/**\n * Zone Gauge Component\n *\n * A Web Component for displaying a zone progress bar/gauge.\n * Shows position within current zone with color coding.\n *\n * @example\n * ```html\n * <bpt-zone-gauge\n *   zone=\"4\"\n *   zone-name=\"Threshold\"\n *   percent=\"65\"\n *   type=\"power\">\n * </bpt-zone-gauge>\n * ```\n *\n * @module ZoneGauge\n */\n\nimport { BaseComponent } from './base/BaseComponent.js';\nimport { sharedStyles } from './styles/shared.js';\n\n/**\n * Zone Gauge Web Component\n */\nexport class ZoneGauge extends BaseComponent {\n    static get observedAttributes(): string[] {\n        return ['zone', 'zone-name', 'percent', 'type', 'compact'];\n    }\n\n    protected getStyles(): string {\n        return `\n            ${sharedStyles}\n\n            :host {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n                padding: var(--space-2);\n                border-radius: var(--radius-md);\n                background: var(--zone-bg, var(--bg-secondary));\n                transition: background-color var(--transition-normal);\n                min-width: 80px;\n            }\n\n            :host([compact]) {\n                padding: 4px 8px;\n                min-width: 60px;\n            }\n\n            /* Zone bindings */\n            :host([zone=\"1\"]) { --zone-color: var(--zone-1-color); --zone-bg: var(--zone-1-color-bg); }\n            :host([zone=\"2\"]) { --zone-color: var(--zone-2-color); --zone-bg: var(--zone-2-color-bg); }\n            :host([zone=\"3\"]) { --zone-color: var(--zone-3-color); --zone-bg: var(--zone-3-color-bg); }\n            :host([zone=\"4\"]) { --zone-color: var(--zone-4-color); --zone-bg: var(--zone-4-color-bg); }\n            :host([zone=\"5\"]) { --zone-color: var(--zone-5-color); --zone-bg: var(--zone-5-color-bg); }\n            :host([zone=\"6\"]) { --zone-color: var(--zone-6-color); --zone-bg: var(--zone-6-color-bg); }\n            :host([zone=\"7\"]) { --zone-color: var(--zone-7-color); --zone-bg: var(--zone-7-color-bg); }\n\n            .zone-header {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                gap: 8px;\n            }\n\n            .zone-number {\n                font-size: var(--font-size-xs);\n                font-weight: var(--font-weight-bold);\n                color: var(--text-primary);\n                background: var(--zone-color, #d0d7de);\n                padding: 2px 8px;\n                border-radius: 10px;\n                white-space: nowrap;\n                /* Optimize contrast for zone number badge if needed, for now using text-primary on zone-color might be tricky without contrast calc.\n                   Let's assume zone colors are light enough or we'd need a specific text color for badges. \n                   Actually, looking at previous code, it used a specific fill color and text color. \n                   Let's use our background colors which are transparent, so maybe we want solid colors for badges?\n                   The previous code used 'fill' which was solid color for the badge background, and valid text color.\n                   Let's stick to using the zone color for text and background for bg, or maybe reverse for pill.\n                */\n                background: var(--zone-color);\n                color: white; /* Most zone colors work well with white text except maybe yellow */\n            }\n            \n            /* Specific overrides for light colors if needed - zone 4 is yellow */\n            :host([zone=\"4\"]) .zone-number {\n                color: black;\n            }\n\n            :host([compact]) .zone-number {\n                font-size: 10px;\n                padding: 1px 6px;\n            }\n\n            .zone-name {\n                font-size: 11px;\n                color: var(--text-secondary);\n                font-weight: var(--font-weight-medium);\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            :host([compact]) .zone-name {\n                display: none;\n            }\n\n            .gauge-container {\n                height: 8px;\n                background: var(--bg-tertiary);\n                border-radius: 4px;\n                overflow: hidden;\n                position: relative;\n            }\n\n            :host([compact]) .gauge-container {\n                height: 6px;\n            }\n\n            .gauge-fill {\n                height: 100%;\n                background: var(--zone-color, var(--interactive-default));\n                border-radius: 4px;\n                transition: width var(--transition-normal), background-color var(--transition-normal);\n                min-width: 4px;\n            }\n\n            .gauge-markers {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                display: flex;\n                justify-content: space-between;\n                padding: 0 2px;\n                pointer-events: none;\n            }\n\n            .gauge-marker {\n                width: 1px;\n                height: 100%;\n                background: rgba(255, 255, 255, 0.3);\n            }\n\n            /* High contrast mode */\n            :host-context([data-high-contrast=\"true\"]) .gauge-fill {\n                background-image: repeating-linear-gradient(\n                    45deg,\n                    transparent,\n                    transparent 2px,\n                    rgba(255,255,255,0.2) 2px,\n                    rgba(255,255,255,0.2) 4px\n                );\n            }\n\n            /* Hidden state */\n            :host([hidden]) {\n                display: none;\n            }\n        `;\n    }\n\n    protected getTemplate(): string {\n        const zone = this.getAttribute('zone') || '';\n        const zoneName = this.getAttribute('zone-name') || '';\n        const percent = parseFloat(this.getAttribute('percent') || '0');\n\n        return `\n            <div class=\"zone-header\">\n                <span class=\"zone-number\" aria-label=\"Zone ${zone}\">Z${zone}</span>\n                <span class=\"zone-name\">${zoneName}</span>\n            </div>\n            <div class=\"gauge-container\" role=\"progressbar\" aria-valuenow=\"${percent}\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-label=\"${zoneName} zone progress\">\n                <div class=\"gauge-fill\" style=\"width: ${Math.max(4, percent)}%\"></div>\n                <div class=\"gauge-markers\">\n                    <span class=\"gauge-marker\"></span>\n                    <span class=\"gauge-marker\"></span>\n                    <span class=\"gauge-marker\"></span>\n                </div>\n            </div>\n        `;\n    }\n\n    protected onAttributeChanged(name: string, _oldValue: string | null, newValue: string | null): void {\n        if (name === 'percent') {\n            this.updateGaugeFill(parseFloat(newValue || '0'));\n        }\n        // Re-render on zone change\n        if (name === 'zone' || name === 'zone-name') {\n            this.render();\n        }\n    }\n\n    /**\n     * Update gauge fill without full re-render\n     */\n    private updateGaugeFill(percent: number): void {\n        const fill = this.shadow.querySelector('.gauge-fill') as HTMLElement;\n        const container = this.shadow.querySelector('.gauge-container') as HTMLElement;\n        if (fill) {\n            fill.style.width = `${Math.max(4, percent)}%`;\n        }\n        if (container) {\n            container.setAttribute('aria-valuenow', String(percent));\n        }\n    }\n\n    /**\n     * Set zone information\n     */\n    public setZone(zone: number, name: string, percent: number): void {\n        this.setAttribute('zone', String(zone));\n        this.setAttribute('zone-name', name);\n        this.setAttribute('percent', String(Math.round(percent)));\n        // Styles are updated declaratively via CSS based on attribute\n    }\n\n    /**\n     * Clear/hide the gauge\n     */\n    public clear(): void {\n        this.removeAttribute('zone');\n        this.removeAttribute('zone-name');\n        this.setAttribute('percent', '0');\n    }\n}\n\n// Register the custom element\ncustomElements.define('bpt-zone-gauge', ZoneGauge);\n\n// Export for type-safe usage\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'bpt-zone-gauge': ZoneGauge;\n    }\n}\n"],"names":["ZoneGauge","BaseComponent","sharedStyles","zone","zoneName","percent","name","_oldValue","newValue","fill","container"],"mappings":"qOAyBO,MAAMA,UAAkBC,CAAc,CACzC,WAAW,oBAA+B,CACtC,MAAO,CAAC,OAAQ,YAAa,UAAW,OAAQ,SAAS,CAC7D,CAEU,WAAoB,CAC1B,MAAO;AAAA,cACDC,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAkItB,CAEU,aAAsB,CAC5B,MAAMC,EAAO,KAAK,aAAa,MAAM,GAAK,GACpCC,EAAW,KAAK,aAAa,WAAW,GAAK,GAC7CC,EAAU,WAAW,KAAK,aAAa,SAAS,GAAK,GAAG,EAE9D,MAAO;AAAA;AAAA,6DAE8CF,CAAI,MAAMA,CAAI;AAAA,0CACjCC,CAAQ;AAAA;AAAA,6EAE2BC,CAAO,uDAAuDD,CAAQ;AAAA,wDAC3F,KAAK,IAAI,EAAGC,CAAO,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQxE,CAEU,mBAAmBC,EAAcC,EAA0BC,EAA+B,CAC5FF,IAAS,WACT,KAAK,gBAAgB,WAAWE,GAAY,GAAG,CAAC,GAGhDF,IAAS,QAAUA,IAAS,cAC5B,KAAK,OAAA,CAEb,CAKQ,gBAAgBD,EAAuB,CAC3C,MAAMI,EAAO,KAAK,OAAO,cAAc,aAAa,EAC9CC,EAAY,KAAK,OAAO,cAAc,kBAAkB,EAC1DD,IACAA,EAAK,MAAM,MAAQ,GAAG,KAAK,IAAI,EAAGJ,CAAO,CAAC,KAE1CK,GACAA,EAAU,aAAa,gBAAiB,OAAOL,CAAO,CAAC,CAE/D,CAKO,QAAQF,EAAcG,EAAcD,EAAuB,CAC9D,KAAK,aAAa,OAAQ,OAAOF,CAAI,CAAC,EACtC,KAAK,aAAa,YAAaG,CAAI,EACnC,KAAK,aAAa,UAAW,OAAO,KAAK,MAAMD,CAAO,CAAC,CAAC,CAE5D,CAKO,OAAc,CACjB,KAAK,gBAAgB,MAAM,EAC3B,KAAK,gBAAgB,WAAW,EAChC,KAAK,aAAa,UAAW,GAAG,CACpC,CACJ,CAGA,eAAe,OAAO,iBAAkBL,CAAS"}