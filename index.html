<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>‚ö°üö¥‚ù§Ô∏è Bike Power Tracker üê±üî•</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/><meta name="theme-color" content="#2196F3"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title" content="Bike Power Tracker"/><link rel="apple-touch-icon" sizes="152x152" href="./assets/icons/icon-152.png"/><link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/icon-180.png"/><link rel="apple-touch-icon" sizes="192x192" href="./assets/icons/icon-192.png"/><link rel="icon" type="image/x-icon" href="/assets/favicon-Baj25luf.ico"/><link rel="icon" type="image/png" sizes="32x32" href="./assets/icons/icon-72.png"/><link rel="icon" type="image/png" sizes="16x16" href="./assets/icons/icon-72.png"/><script>(function () {
                try {
                    var stored = localStorage.getItem('bpt-dark-mode');
                    var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                    // Check for explicit dark mode, or system preference (if stored is 'system' or not set)
                    if (stored === 'dark' || ((!stored || stored === 'system') && prefersDark)) {
                        document.documentElement.setAttribute('data-theme', 'dark');
                    }

                    // High contrast mode initialization
                    var settings = localStorage.getItem('bpt-settings');
                    if (settings) {
                        var parsed = JSON.parse(settings);
                        if (parsed.highContrast) {
                            document.documentElement.setAttribute('data-high-contrast', 'true');
                        }
                        if (parsed.colorblindPatterns) {
                            document.documentElement.setAttribute('data-colorblind-patterns', 'true');
                        }
                    }
                } catch (e) {}
            })();</script><script type="module" crossorigin src="/assets/index-N21XmhYf.js"></script><link rel="modulepreload" crossorigin href="/assets/feature-bluetooth-WlFmxkI9.js"><link rel="modulepreload" crossorigin href="/assets/vendor-core-Dob3nYDb.js"><link rel="modulepreload" crossorigin href="/assets/feature-export-7zlEGvkQ.js"><link rel="modulepreload" crossorigin href="/assets/vendor-leaflet-3-yx3GaH.js"><link rel="stylesheet" crossorigin href="/assets/index-DXB2aeih.css"><link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script><style id="critical-css">:root{--color-primary-50: #e3f2fd;--color-primary-100: #bbdefb;--color-primary-200: #90caf9;--color-primary-300: #64b5f6;--color-primary-400: #42a5f5;--color-primary-500: #2196f3;--color-primary-600: #1e88e5;--color-primary-700: #1976d2;--color-primary-800: #1565c0;--color-primary-900: #0d47a1;--color-gray-50: #fafafa;--color-gray-100: #f5f5f5;--color-gray-200: #eeeeee;--color-gray-300: #e0e0e0;--color-gray-400: #bdbdbd;--color-gray-500: #9e9e9e;--color-gray-600: #757575;--color-gray-700: #616161;--color-gray-800: #424242;--color-gray-900: #212121;--color-success-light: #e8f5e9;--color-success-main: #4caf50;--color-success-dark: #2e7d32;--color-warning-light: #fff3e0;--color-warning-main: #ff9800;--color-warning-dark: #e65100;--color-error-light: #ffebee;--color-error-main: #f44336;--color-error-dark: #c62828;--color-info-light: #e3f2fd;--color-info-main: #2196f3;--color-info-dark: #1565c0;--zone-1-color: #808080;--zone-2-color: #2196f3;--zone-3-color: #4caf50;--zone-4-color: #ffeb3b;--zone-5-color: #ff9800;--zone-6-color: #f44336;--zone-7-color: #9c27b0;--zone-1-color-bg: rgba(128, 128, 128, .15);--zone-2-color-bg: rgba(33, 150, 243, .15);--zone-3-color-bg: rgba(76, 175, 80, .15);--zone-4-color-bg: rgba(255, 235, 59, .15);--zone-5-color-bg: rgba(255, 152, 0, .15);--zone-6-color-bg: rgba(244, 67, 54, .15);--zone-7-color-bg: rgba(156, 39, 176, .15);--hr-zone-1-color: #808080;--hr-zone-2-color: #2196f3;--hr-zone-3-color: #4caf50;--hr-zone-4-color: #ff9800;--hr-zone-5-color: #f44336}[data-theme=dark]{--color-gray-50: #212121;--color-gray-100: #303030;--color-gray-200: #424242;--color-gray-300: #616161;--color-gray-400: #757575;--color-gray-500: #9e9e9e;--color-gray-600: #bdbdbd;--color-gray-700: #e0e0e0;--color-gray-800: #eeeeee;--color-gray-900: #fafafa;--zone-1-color: #9e9e9e;--zone-2-color: #42a5f5;--zone-3-color: #66bb6a;--zone-4-color: #ffee58;--zone-5-color: #ffa726;--zone-6-color: #ef5350;--zone-7-color: #ab47bc}:root{--space-0: 0;--space-1: .25rem;--space-2: .5rem;--space-3: .75rem;--space-4: 1rem;--space-5: 1.25rem;--space-6: 1.5rem;--space-8: 2rem;--space-10: 2.5rem;--space-12: 3rem;--space-16: 4rem;--space-20: 5rem;--space-24: 6rem;--spacing-card-padding: var(--space-4);--spacing-section-gap: var(--space-6);--spacing-input-padding: var(--space-3)}:root{--font-family-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;--font-family-mono: "SF Mono", SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.25rem;--font-size-2xl: 1.5rem;--font-size-3xl: 1.875rem;--font-size-4xl: 2.25rem;--font-size-5xl: 3rem;--font-size-metric-value: clamp(2rem, 8vw, 4rem);--font-size-metric-label: var(--font-size-sm);--font-size-metric-unit: var(--font-size-xs);--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--font-weight-bold: 700;--line-height-tight: 1.25;--line-height-normal: 1.5;--line-height-relaxed: 1.75}:root{--bg-primary: var(--color-gray-50);--bg-secondary: var(--color-gray-100);--bg-tertiary: var(--color-gray-200);--bg-elevated: white;--bg-overlay: rgba(0, 0, 0, .5);--text-primary: var(--color-gray-900);--text-secondary: var(--color-gray-700);--text-tertiary: var(--color-gray-500);--text-inverse: white;--text-accent: var(--color-primary-600);--border-default: var(--color-gray-300);--border-subtle: var(--color-gray-200);--border-strong: var(--color-gray-400);--border-focus: var(--color-primary-500);--interactive-default: var(--color-primary-500);--interactive-hover: var(--color-primary-600);--interactive-active: var(--color-primary-700);--interactive-disabled: var(--color-gray-400);--shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px rgba(0, 0, 0, .1);--shadow-lg: 0 10px 15px rgba(0, 0, 0, .1);--shadow-xl: 0 20px 25px rgba(0, 0, 0, .15);--transition-fast: .15s ease;--transition-normal: .25s ease;--transition-slow: .35s ease;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-full: 9999px}[data-theme=dark]{--bg-primary: var(--color-gray-900);--bg-secondary: var(--color-gray-800);--bg-tertiary: var(--color-gray-700);--bg-elevated: var(--color-gray-800);--bg-overlay: rgba(0, 0, 0, .7);--text-primary: var(--color-gray-100);--text-secondary: var(--color-gray-300);--text-tertiary: var(--color-gray-500);--text-inverse: var(--color-gray-900);--text-accent: var(--color-primary-400);--border-default: var(--color-gray-600);--border-subtle: var(--color-gray-700);--border-strong: var(--color-gray-500);--shadow-sm: 0 1px 2px rgba(0, 0, 0, .3);--shadow-md: 0 4px 6px rgba(0, 0, 0, .4);--shadow-lg: 0 10px 15px rgba(0, 0, 0, .5)}[data-high-contrast=true]{--text-primary: black;--text-secondary: black;--bg-primary: white;--border-default: black;--border-focus: black}[data-theme=dark][data-high-contrast=true]{--text-primary: white;--text-secondary: white;--bg-primary: black;--border-default: white;--border-focus: white}*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}:root{--color-bg-primary: var(--bg-primary);--color-bg-secondary: var(--bg-secondary);--color-bg-tertiary: var(--bg-tertiary);--color-bg-hover: var(--bg-hover);--color-bg-active: var(--bg-active);--color-text-primary: var(--text-primary);--color-text-secondary: var(--text-secondary);--color-text-muted: var(--text-muted);--color-border: var(--border-default);--color-border-strong: var(--border-focus);--color-accent: var(--interactive-default);--color-accent-hover: var(--interactive-hover);--color-success: var(--zone-3-color);--color-error: var(--zone-6-color);--color-warning: var(--zone-4-color);--header-bg: var(--bg-elevated);--menu-bg: var(--bg-elevated);--modal-bg: var(--bg-elevated);--card-bg: var(--bg-secondary);--input-bg: var(--bg-primary);--switch-bg: var(--bg-tertiary);--switch-knob: var(--text-inverse);--color-shadow: rgba(0, 0, 0, .1);--color-shadow-strong: rgba(0, 0, 0, .15);--gradient-header: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);--section-header-bg: var(--bg-secondary);--modal-overlay: rgba(0, 0, 0, .5)}body{font-family:var(--font-family-sans);line-height:var(--line-height-normal);color:var(--text-primary);background-color:var(--bg-primary);-webkit-tap-highlight-color:transparent}.switch{position:relative;display:inline-block;width:36px;height:20px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;inset:0;background-color:var(--bg-tertiary);transition:background-color var(--transition-normal)}.slider:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:var(--text-inverse);transition:transform var(--transition-normal),background-color var(--transition-normal)}input:checked+.slider{background-color:var(--zone-3-color-bg)}input:focus+.slider{box-shadow:0 0 1px var(--interactive-default)}input:checked+.slider:before{transform:translate(16px)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}.stream-modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:var(--modal-overlay);align-items:center;justify-content:center;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.stream-modal-content{background-color:var(--bg-elevated);border-radius:var(--radius-lg);width:90%;max-width:600px;max-height:85vh;display:flex;flex-direction:column;box-shadow:var(--shadow-xl);transition:background-color var(--transition-normal),box-shadow var(--transition-normal)}.stream-modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--space-5) var(--space-6);border-bottom:1px solid var(--border-default);transition:border-color var(--transition-normal)}.stream-modal-header h2{font-size:var(--font-size-2xl);font-weight:var(--font-weight-semibold);color:var(--text-primary);margin:0;transition:color var(--transition-normal)}.close-button{background:none;border:none;font-size:32px;color:var(--text-secondary);cursor:pointer;padding:0;transition:color var(--transition-normal),background-color .15s ease;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-sm)}.close-button:hover{background-color:var(--bg-hover);color:var(--text-primary)}.stream-modal-body{padding:var(--space-5) var(--space-6);overflow-y:auto;flex:1}:root{--df-surface: #1a1a2e;--df-surface-elevated: #252542;--df-surface-hover: #2d2d4a;--df-text: #ffffff;--df-text-muted: #a0a0b0;--df-text-dim: #666680;--df-border: #333355;--df-border-subtle: #2a2a44;--df-primary: #4ecdc4;--df-primary-dark: #3db3aa;--df-power: #ffd700;--df-power-bg: rgba(255, 215, 0, .15);--df-heartrate: #ff6b6b;--df-heartrate-bg: rgba(255, 107, 107, .15);--df-cadence: #4ecdc4;--df-cadence-bg: rgba(78, 205, 196, .15);--df-speed: #45b7d1;--df-speed-bg: rgba(69, 183, 209, .15);--df-distance: #96ceb4;--df-distance-bg: rgba(150, 206, 180, .15);--df-elevation: #a8e6cf;--df-elevation-bg: rgba(168, 230, 207, .15);--df-time: #dda0dd;--df-time-bg: rgba(221, 160, 221, .15);--df-zone-1: #b8b8b8;--df-zone-2: #45b7d1;--df-zone-3: #4ecdc4;--df-zone-4: #ffd700;--df-zone-5: #ff9f43;--df-zone-6: #ff6b6b;--df-zone-7: #e056fd;--df-hr-zone-1: #4ecdc4;--df-hr-zone-2: #45b7d1;--df-hr-zone-3: #ffd700;--df-hr-zone-4: #ff9f43;--df-hr-zone-5: #ff6b6b;--df-spacing-xs: 4px;--df-spacing-sm: 8px;--df-spacing-md: 12px;--df-spacing-lg: 16px;--df-spacing-xl: 24px;--df-radius-sm: 4px;--df-radius-md: 8px;--df-radius-lg: 12px;--df-transition-fast: .15s ease;--df-transition: .25s ease;--df-transition-slow: .4s ease;--df-shadow-sm: 0 2px 4px rgba(0, 0, 0, .2);--df-shadow-md: 0 4px 12px rgba(0, 0, 0, .3);--df-shadow-lg: 0 8px 24px rgba(0, 0, 0, .4);--df-font-xs: 10px;--df-font-sm: 12px;--df-font-md: 14px;--df-font-lg: 16px;--df-font-xl: 20px;--df-font-2xl: 24px;--df-font-3xl: 32px;--df-font-4xl: 48px}@media(prefers-color-scheme:light){:root{--df-surface: #f5f5f7;--df-surface-elevated: #ffffff;--df-surface-hover: #e8e8eb;--df-text: #1a1a2e;--df-text-muted: #666680;--df-text-dim: #999999;--df-border: #d0d0dd;--df-border-subtle: #e5e5ee}}@keyframes df-pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes df-shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}@media(max-width:400px){:root{--df-spacing-sm: 6px;--df-spacing-md: 10px;--df-font-3xl: 28px;--df-font-4xl: 40px}}@media(min-width:600px){:root{--df-spacing-sm: 10px;--df-spacing-md: 14px}}@media(min-width:900px){:root{--df-spacing-sm: 12px;--df-spacing-md: 16px;--df-font-4xl: 56px}}@media(prefers-reduced-motion:reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media(prefers-contrast:high){:root{--df-border: #ffffff;--df-text-muted: #ffffff}}main{margin-top:0;flex:1;display:flex;align-items:center;justify-content:center;padding:0;overflow:hidden;min-height:0;background-color:var(--bg-primary);transition:background-color var(--transition-normal)}#mainContent{display:flex;gap:0;width:100%;height:100%;align-items:stretch}.page-view{display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden}@media(max-width:768px){#mainContent{flex-direction:column;gap:0}}details{position:absolute;left:20px;top:50%;transform:translateY(-50%);background:transparent;z-index:101}summary{font-size:24px;padding:8px;cursor:pointer;list-style:none;-webkit-user-select:none;user-select:none;color:var(--text-primary);transition:color var(--transition-normal)}summary::-webkit-details-marker{display:none}#controls{position:absolute;top:100%;left:0;margin-top:8px;background:var(--bg-elevated);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);padding:8px;display:flex;flex-direction:column;gap:4px;min-width:180px;transition:background-color var(--transition-normal),box-shadow var(--transition-normal)}#controls button{padding:8px 12px;font-size:14px;border:none;border-radius:6px;background-color:transparent;cursor:pointer;white-space:nowrap;text-align:left;transition:background-color .15s ease,color var(--transition-normal);color:var(--text-primary);font-weight:400}#controls button:hover{background-color:var(--bg-hover)}#controls button:active{background-color:var(--bg-active)}.menu-toggle-container{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;font-size:14px;color:var(--text-primary);transition:color var(--transition-normal)}header{position:relative;flex:0 0 auto;height:auto;min-height:8vh;background:var(--bg-elevated);box-shadow:var(--shadow-sm);display:flex;align-items:center;justify-content:center;padding:0 2vw;z-index:100;transition:background-color var(--transition-normal),box-shadow var(--transition-normal)}header h1{font-size:var(--font-size-xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin:0}#topBarControls{display:grid;grid-template-columns:minmax(0,1fr) auto minmax(0,1fr);align-items:center;gap:4px;width:100%}#time{grid-column:1;justify-self:center;white-space:nowrap}.workout-controls{display:flex;gap:8px;grid-column:3;justify-self:start}.workout-btn{padding:8px 12px;font-size:20px;border:none;border-radius:6px;background-color:transparent;cursor:pointer;transition:background-color .15s ease,transform .1s ease;line-height:1;min-width:44px;min-height:44px;color:var(--text-primary);display:inline-flex;align-items:center;justify-content:center}.workout-btn:hover{background-color:var(--bg-secondary)}.workout-btn:active{background-color:var(--bg-tertiary);transform:scale(.95)}.workout-btn:focus-visible{outline:2px solid var(--border-focus);outline-offset:2px}.workout-btn-start{background-color:var(--zone-3-color-bg);color:var(--zone-3-color)}.workout-btn-start:hover{background-color:#4caf5040}.workout-btn-pause{background-color:var(--zone-4-color-bg);color:var(--zone-4-color)}.workout-btn-pause:hover{background-color:#ffc10740}.workout-btn-resume{background-color:var(--zone-3-color-bg);color:var(--zone-3-color)}.workout-btn-resume:hover{background-color:#4caf5040}.workout-btn-stop{background-color:var(--zone-6-color-bg);color:var(--zone-6-color)}.workout-btn-stop:hover{background-color:#f4433640}.workout-btn-lap{background-color:#9c27b026;color:#9c27b0}.workout-btn-lap:hover{background-color:#9c27b040}.lap-counter{font-size:14px;color:var(--text-secondary);padding:4px 8px;background-color:#9c27b01a;border-radius:4px;margin-left:auto}.lap-counter #lapCount{font-weight:var(--font-weight-bold);color:#9c27b0}.workout-btn:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(100%)}.metrics-section{flex:1;display:flex;flex-direction:column;min-width:0;overflow-y:hidden;overflow-x:hidden;padding:0;background:var(--bg-primary);position:relative;container-type:size;transition:background-color var(--transition-normal)}@media(max-width:768px){.metrics-section{flex:1}}.section-title{font-size:min(1.5em,3vh);font-weight:var(--font-weight-bold);color:var(--text-primary);margin:0}.section-header{display:flex;justify-content:space-between;align-items:center;padding:min(8px,1.5vh) min(10px,1vw);margin-bottom:min(8px,1.5vh);background:var(--bg-secondary);border-bottom:2px solid var(--border-default);position:sticky;top:0;z-index:20;flex:0 0 auto;height:10cqh;min-height:40px;transition:background-color var(--transition-normal),border-color var(--transition-normal)}.close-stream-btn{background:none;border:none;font-size:20px;color:var(--text-secondary);cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .15s ease,color var(--transition-normal);display:inline-flex;align-items:center;justify-content:center}.close-stream-btn:hover{background-color:var(--bg-hover)}.stream-title-with-status{display:flex;align-items:center;gap:10px}.last-update-inline{font-size:min(.8em,2vh);color:var(--text-muted);text-align:center;font-style:italic;margin-top:min(8px,1vh);padding:0 min(20px,2vw) min(12px,2vh)}#streamMetricsTable{text-align:center;width:100%;flex:1;display:flex;flex-direction:column;justify-content:space-evenly;transition:opacity var(--transition-normal),filter var(--transition-normal);padding:0 min(20px,2vw) min(16px,2vh);overflow:hidden}.metric-group{display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1}#streamMetricsTable dt{font-size:4cqh;color:var(--text-secondary);margin-top:0;transition:color var(--transition-normal)}#streamMetricsTable dt:first-child{margin-top:0}#streamMetricsTable dd{font-size:14cqh;font-weight:var(--font-weight-bold);color:var(--text-primary);margin-bottom:0;line-height:.9;transition:color var(--transition-normal)}.streams-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px;width:100%;padding:10px;overflow-y:auto;max-height:calc(100vh - 150px)}.view-toggle-btn{background:transparent;border:1px solid var(--border-default);border-radius:var(--radius-sm);padding:4px 8px;cursor:pointer;font-size:16px;transition:background-color var(--transition-fast);color:var(--text-secondary)}.view-toggle-btn:hover{background-color:var(--bg-secondary);color:var(--text-primary)}.view-toggle-btn.active{background-color:var(--bg-tertiary);color:var(--text-primary);border-color:var(--border-strong)}.streams-compact-list{display:flex;flex-direction:column;gap:4px;width:100%;padding:10px;overflow-y:auto;max-height:calc(100vh - 150px)}.workout-controls{display:flex;justify-content:space-between;align-items:center;padding:8px 0;margin-bottom:12px;border-bottom:1px solid var(--border-subtle)}.workout-pagination{display:flex;align-items:center;gap:8px}.workout-control-btn{background:transparent;border:1px solid var(--border-default);border-radius:var(--radius-sm);padding:6px 10px;cursor:pointer;font-size:14px;transition:background-color var(--transition-fast);color:var(--text-primary)}.workout-control-btn:hover:not(:disabled){background-color:var(--bg-secondary)}.workout-control-btn:disabled{opacity:.5;cursor:not-allowed;color:var(--text-tertiary)}#historyPageInfo{font-size:13px;color:var(--text-secondary)}.workout-list{display:flex;flex-direction:column;gap:12px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skip-link{position:absolute;top:-40px;left:0;background:var(--interactive-default);color:var(--text-inverse);padding:var(--space-2) var(--space-4);z-index:10000;text-decoration:none;font-weight:var(--font-weight-bold);border-radius:0 0 var(--radius-sm) 0;transition:top var(--transition-fast)}.skip-link:focus{top:0;outline:3px solid var(--color-warning-main);outline-offset:2px}button:focus-visible,[role=button]:focus-visible,a:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible{outline:3px solid var(--border-focus);outline-offset:2px;box-shadow:0 0 0 6px var(--zone-2-color-bg)}@media(prefers-reduced-motion:reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}[data-high-contrast=true]{--color-text-primary: #000000;--color-text-secondary: #1a1a1a;--color-text-muted: #333333;--color-bg-primary: #ffffff;--color-bg-secondary: #f0f0f0;--color-border: #000000;--color-border-strong: #000000;--color-accent: #0000cc;--color-accent-hover: #000099;--color-success: #006600;--color-error: #cc0000;--color-warning: #996600}[data-theme=dark][data-high-contrast=true],[data-high-contrast=true][data-theme=dark]{--color-text-primary: #ffffff;--color-text-secondary: #e0e0e0;--color-text-muted: #cccccc;--color-bg-primary: #000000;--color-bg-secondary: #1a1a1a;--color-border: #ffffff;--color-border-strong: #ffffff;--color-accent: #66b3ff;--color-accent-hover: #99ccff;--color-success: #66ff66;--color-error: #ff6666;--color-warning: #ffcc66}[data-high-contrast=true] :focus-visible{outline:4px solid #000000!important;outline-offset:3px!important;box-shadow:0 0 0 6px #fff,0 0 0 10px #000!important}[data-theme=dark][data-high-contrast=true] :focus-visible{outline:4px solid #ffffff!important;outline-offset:3px!important;box-shadow:0 0 0 6px #000,0 0 0 10px #fff!important}[data-high-contrast=true] button,[data-high-contrast=true] .workout-btn{border:2px solid currentColor!important}[data-high-contrast=true] #streamMetricsTable dd{text-decoration-line:underline;text-decoration-style:dotted;text-underline-offset:4px}[data-high-contrast=true] .slider{border:2px solid var(--color-border)}[data-high-contrast=true] input:checked+.slider{background-color:var(--color-success)}@media(prefers-contrast:more){:root{--color-text-primary: #000000;--color-text-secondary: #1a1a1a;--color-border: #000000;--color-accent: #0000cc}button,.workout-btn{border:2px solid currentColor!important}}body{height:100vh;height:100dvh;display:flex;flex-direction:column;overflow:hidden;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}@media(orientation:landscape)and (max-height:500px){header{min-height:6vh;padding:0 1vw}header h1{font-size:16px}.workout-btn{padding:4px 8px;font-size:16px;min-width:36px;min-height:36px}#mainContent{flex-direction:row}.metrics-section{padding:0}.section-header{padding:4px 8px;min-height:32px;height:8cqh}#streamMetricsTable{flex-direction:row;flex-wrap:wrap;justify-content:space-around;padding:0 8px}.metric-group{flex:1 1 30%;min-width:100px;padding:4px}#streamMetricsTable dd{font-size:12cqh}#streamMetricsTable dt{font-size:3cqh}.lap-counter{font-size:12px;padding:2px 6px}details{left:8px}summary{font-size:20px;padding:4px}.stream-modal-content{max-height:95vh}.stream-modal-header,.stream-modal-body{padding:12px 16px}}@media(orientation:landscape)and (min-height:501px)and (max-height:800px){#streamMetricsTable{flex-direction:row;flex-wrap:wrap;justify-content:space-around}.metric-group{flex:1 1 30%;min-width:120px}}#mainContent{padding-bottom:70px}#gpsMap{position:relative;min-height:200px;background:#f0f0f0;border-radius:8px;overflow:hidden;margin-bottom:16px;box-shadow:0 4px 6px #0000001a;z-index:10}#toggleMapBtn.active{background:var(--color-primary, #007bff);color:#fff;border-color:var(--color-primary-dark, #0056b3)}
</style></head><body><a href="#mainContent" class="skip-link">Skip to main content</a><div id="srAnnouncements" class="sr-only" aria-live="polite" aria-atomic="true"></div><div id="updateNotification" role="alertdialog" aria-labelledby="updateNotificationTitle" aria-modal="false" style="display:none;position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#4caf50;color:#fff;padding:16px 24px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:1000;max-width:90%;text-align:center"><p id="updateNotificationTitle" style="margin:0 0 12px 0;font-size:14px">A new version is available!</p><button id="updateButton" aria-label="Update application now" style="background:#fff;color:#4caf50;border:none;padding:8px 16px;border-radius:4px;margin-right:8px;cursor:pointer;font-weight:700">Update Now</button> <button id="dismissUpdate" aria-label="Update later" style="background:0 0;color:#fff;border:1px solid #fff;padding:8px 16px;border-radius:4px;cursor:pointer">Later</button></div><div id="streamNameModal" class="stream-modal" role="dialog" aria-labelledby="streamNameModalTitle" aria-modal="true" style="display:none"><div class="stream-modal-content" style="max-width:400px"><div class="stream-modal-header"><h2 id="streamNameModalTitle">üì° Start Streaming</h2><button id="closeStreamNameModal" class="close-button" aria-label="Close dialog">&times;</button></div><div class="stream-modal-body"><label for="streamNameInput" style="display:block;margin-bottom:12px;color:#666">Enter a name for your stream:</label> <input id="streamNameInput" placeholder="Enter stream name..." aria-describedby="streamNameHint" style="width:100%;padding:8px;border:1px solid #d0d7de;border-radius:6px;margin-bottom:16px;font-size:16px"/> <span id="streamNameHint" class="sr-only">Choose a memorable name for others to find your stream</span><div style="display:flex;justify-content:flex-end;gap:8px"><button id="cancelStreamName" style="padding:8px 16px;border:1px solid #d0d7de;background:#fff;border-radius:6px;cursor:pointer">Cancel</button> <button id="confirmStreamName" style="padding:8px 16px;border:none;background:#2196f3;color:#fff;border-radius:6px;cursor:pointer;font-weight:700">Start</button></div></div></div></div><div id="activeStreamToolbar" class="stream-toolbar" role="toolbar" aria-label="Streaming controls" style="display:none"><div class="stream-info"><span class="stream-indicator" aria-hidden="true">‚óè</span> <span class="stream-label">Live:</span> <span id="toolbarStreamName" class="stream-name" aria-live="polite"></span></div><div class="stream-controls"><button id="streamPlayPauseBtn" class="stream-control-btn" aria-label="Pause streaming" title="Pause Stream">‚è∏Ô∏è</button> <button id="streamStopBtn" class="stream-control-btn stop" aria-label="Stop streaming" title="Stop Streaming">‚èπÔ∏è</button></div></div><header role="banner"><nav aria-label="Main navigation"><details><summary aria-label="Open menu" aria-expanded="false" tabindex="0">‚ò∞</summary><div id="controls" role="menu"><button id="connectPower" class="menu-btn" role="menuitem" aria-label="Connect power meter" data-testid="connect-power">‚ö° Connect Power</button> <button id="connectCadence" class="menu-btn" role="menuitem" aria-label="Connect cadence sensor" data-testid="connect-cadence">üö¥ Connect Cadence</button> <button id="connectHeartrate" class="menu-btn" role="menuitem" aria-label="Connect heart rate monitor" data-testid="connect-heartrate">‚ù§Ô∏è Connect Heartrate</button> <button id="connectTreadmill" role="menuitem" aria-label="Connect Treadmill">üèÉ Connect Treadmill</button> <button id="connectGps" role="menuitem" aria-label="Connect GPS">üìç Connect GPS</button> <button id="exportData" role="menuitem" aria-label="Export workout data">üíæ Export Data</button> <button id="discardButton" role="menuitem" aria-label="Discard workout data">üóëÔ∏è Discard Data</button> <button id="workoutsButton" role="menuitem" aria-label="Structured Workouts">üèãÔ∏è Structured Workouts</button> <button id="plansButton" role="menuitem" aria-label="Training Plans">üìÖ Training Plans</button> <button id="startStreamButton" role="menuitem" aria-label="Start live streaming">üì° Start Streaming</button> <button id="viewStreamsButton" role="menuitem" aria-label="View live streams">üåê View Streams</button> <button id="settingsButton" role="menuitem" aria-label="Open settings">‚öôÔ∏è Settings</button> <button id="aboutButton" role="menuitem" aria-label="About this project">‚ÑπÔ∏è About</button><div class="menu-toggle-container" role="menuitem"><label for="toggleYourMetrics" id="yourMetricsLabel" style="flex-grow:1;cursor:pointer">Your Metrics</label> <label class="switch"><input type="checkbox" id="toggleYourMetrics" checked="checked" aria-labelledby="yourMetricsLabel"/> <span class="slider round" aria-hidden="true"></span></label></div><div class="menu-toggle-container" role="menuitem"><label for="toggleStreamMetrics" id="streamMetricsLabel" style="flex-grow:1;cursor:pointer">Stream Metrics</label> <label class="switch"><input type="checkbox" id="toggleStreamMetrics" aria-labelledby="streamMetricsLabel"/> <span class="slider round" aria-hidden="true"></span></label></div><div class="menu-toggle-container" role="menuitem"><label for="toggleDarkMode" id="darkModeLabel" style="flex-grow:1;cursor:pointer">üåô Dark Mode</label> <label class="switch"><input type="checkbox" id="toggleDarkMode" aria-labelledby="darkModeLabel"/> <span class="slider round" aria-hidden="true"></span></label></div></div></details></nav></header><main role="main"><div id="mainContent"><div id="page-workouts" class="page-view" style="display:none"></div><div id="page-dashboard" class="page-view"><div id="yourMetrics" class="metrics-section" aria-label="Your workout metrics"><div id="yourMetricsToolbar" class="section-header"><div id="topBarControls"><h1 id="time" aria-live="off" aria-label="Elapsed time"></h1><div id="workoutControls" class="workout-controls" role="group" aria-label="Workout controls"><button id="startButton" class="workout-btn workout-btn-start" aria-label="Start workout" data-testid="start-workout">‚ñ∂Ô∏è</button> <button id="pauseButton" class="workout-btn workout-btn-pause" aria-label="Pause workout" style="display:none" data-testid="pause-workout">‚è∏Ô∏è</button> <button id="resumeButton" class="workout-btn workout-btn-resume" aria-label="Resume workout" style="display:none" data-testid="resume-workout">‚ñ∂Ô∏è</button> <button id="lapButton" class="workout-btn workout-btn-lap" aria-label="Mark lap" style="display:none" title="Mark Lap (L)">üèÅ</button> <button id="stopButton" class="workout-btn workout-btn-stop" aria-label="Stop and save workout" style="display:none" data-testid="stop-workout">‚èπÔ∏è</button> <button id="toggleMapBtn" class="workout-btn workout-btn-map" aria-label="Toggle Map View" style="display:none">üó∫Ô∏è</button></div></div><div id="lapCounter" class="lap-counter" style="display:none" aria-live="polite"><span id="lapCountLabel">Laps: </span><span id="lapCount">0</span></div></div><div id="gpsMap" style="display:none;height:350px;width:100%"></div><bpt-screen-carousel id="dataFieldsCarousel"></bpt-screen-carousel></div><div id="streamMetrics" class="metrics-section" aria-label="Stream metrics" style="display:none"><div class="section-header"><div class="stream-title-with-status"><h2 class="section-title" id="streamTitle">Stream</h2><span id="streamStatus" class="status-badge" role="status" aria-live="polite"></span></div><button id="closeStreamView" class="close-stream-btn" aria-label="Close stream view">‚úñ</button></div><dl id="streamMetricsTable" aria-label="Stream workout metrics"><div class="metric-group metric-group-power"><dt id="streamPowerLabel">Power</dt><dd id="streamPower" aria-labelledby="streamPowerLabel">--</dd></div><div class="metric-group metric-group-cadence"><dt id="streamCadenceLabel">Cadence</dt><dd id="streamCadence" aria-labelledby="streamCadenceLabel">--</dd></div><div class="metric-group metric-group-heartrate"><dt id="streamHeartrateLabel">Heart Rate</dt><dd id="streamHeartrate" aria-labelledby="streamHeartrateLabel">--</dd></div><div class="metric-group metric-group-speed"><dt id="streamSpeedLabel">Speed</dt><dd id="streamSpeed" aria-labelledby="streamSpeedLabel">--</dd></div><div class="metric-group metric-group-distance"><dt id="streamDistanceLabel">Distance</dt><dd id="streamDistance" aria-labelledby="streamDistanceLabel">--</dd></div><div class="metric-group metric-group-altitude"><dt id="streamAltitudeLabel">Altitude</dt><dd id="streamAltitude" aria-labelledby="streamAltitudeLabel">--</dd></div><div class="metric-group"><dt id="streamElapsedLabel">‚è±Ô∏è Elapsed</dt><dd id="streamElapsed" aria-labelledby="streamElapsedLabel">--</dd></div></dl><div id="streamLastUpdate" class="last-update-inline" role="status" aria-live="polite">Waiting for data...</div><reaction-panel></reaction-panel></div><div id="allStreamsMetrics" class="metrics-section" aria-label="All active streams" style="display:none"><div class="section-header"><h2 class="section-title">All Streams</h2><div class="viewer-status"><span id="allStreamsStatus" class="status-badge connecting" role="status" aria-live="polite">Connecting...</span> <button id="toggleViewBtn" class="view-toggle-btn" aria-label="Toggle compact view" title="Toggle compact view">üìã</button> <button id="closeAllStreamsView" class="close-stream-btn" aria-label="Close all streams view">‚úñ</button></div></div><div id="allStreamsGrid" class="streams-grid" role="list" aria-label="Stream cards"></div><div id="allStreamsList" class="streams-compact-list" role="list" aria-label="Stream list" style="display:none"></div></div></div><div id="page-history" class="page-view" style="display:none"></div><div id="page-workouts" class="page-view" style="display:none"></div><div id="page-plans" class="page-view" style="display:none"></div><div id="page-settings" class="page-view" style="display:none"></div></div></main><template id="settingsTemplate"><div class="page-header" style="padding:16px;border-bottom:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center"><h2 id="settingsTitle">‚öôÔ∏è Settings</h2></div><div class="page-content" style="padding:16px;overflow-y:auto;flex:1"><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üë§ User Profile</legend><div style="display:flex;flex-direction:column;gap:12px"><div style="display:flex;flex-direction:column;gap:4px"><label for="settingFtp" style="font-size:16px">Functional Threshold Power (FTP)</label><div style="display:flex;align-items:center;gap:8px"><input type="number" id="settingFtp" min="0" max="2000" style="padding:8px;border:1px solid #ccc;border-radius:4px;flex:1"/> <span style="font-size:14px;color:#666">Watts</span></div></div><div style="display:flex;flex-direction:column;gap:4px"><label for="settingMaxHr" style="font-size:16px">Max Heart Rate</label><div style="display:flex;align-items:center;gap:8px"><input type="number" id="settingMaxHr" min="0" max="250" style="padding:8px;border:1px solid #ccc;border-radius:4px;flex:1"/> <span style="font-size:14px;color:#666">BPM</span></div></div><div style="display:flex;flex-direction:column;gap:4px"><label for="settingWeight" style="font-size:16px">Weight</label><div style="display:flex;align-items:center;gap:8px"><input type="number" id="settingWeight" min="0" max="300" step="0.1" style="padding:8px;border:1px solid #ccc;border-radius:4px;flex:1"/> <span style="font-size:14px;color:#666">kg</span></div></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üèÖ Activity Type</legend><div style="display:flex;flex-direction:column;gap:12px"><div style="display:flex;flex-direction:column;gap:4px"><label for="settingSportType" style="font-size:16px">Sport Type</label> <select id="settingSportType" style="padding:10px;border:1px solid #ccc;border-radius:4px;font-size:16px;background:#fff"><option value="cycling">üö¥ Cycling</option><option value="running">üèÉ Running</option><option value="walking">üö∂ Walking</option></select><p style="font-size:12px;color:#666;margin:4px 0 0 0">Changes metrics display and export format</p></div><div id="runningOptions" style="display:none;padding-top:12px;border-top:1px solid #d0d7de"><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingShowPace" checked="checked" style="width:20px;height:20px"/><div><span style="font-size:16px">Show Pace (min/km)</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Display pace instead of speed for running</p></div></label><div style="display:flex;flex-direction:column;gap:4px"><label for="settingThresholdPace" style="font-size:16px">Threshold Pace</label><div style="display:flex;align-items:center;gap:8px"><input id="settingThresholdPace" placeholder="5:00" pattern="[0-9]{1,2}:[0-5][0-9]" style="padding:8px;border:1px solid #ccc;border-radius:4px;flex:1;font-size:16px"/> <span style="font-size:14px;color:#666">min/km</span></div><p style="font-size:12px;color:#666;margin:4px 0 0 0">Your lactate threshold pace for zone calculations</p></div></div></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üì± Data Screens</legend><p style="margin-bottom:12px;color:#666;font-size:14px">Configure the screens shown during your workout. Swipe or tap dots to switch between screens.</p><bpt-profile-settings id="profileSettings"></bpt-profile-settings></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üìä Dashboard Display</legend><p style="margin-bottom:12px;color:#666;font-size:14px">Select metrics to show:</p><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingPower" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">‚ö° Power</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingCadence" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">üö¥ Cadence</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingHeartrate" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">‚ù§Ô∏è Heart Rate</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingSpeed" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">üí® Speed</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingDistance" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">üìè Distance</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingAltitude" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">üèîÔ∏è Altitude</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingShowCalories" style="width:20px;height:20px"/> <span style="font-size:16px">üî• Calories (kcal)</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingTreadmillSpeed" style="width:20px;height:20px"/> <span style="font-size:16px">üèÉ Treadmill Speed</span></label></div><div style="margin-top:16px;padding-top:16px;border-top:1px solid #d0d7de"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingPower3s" style="width:20px;height:20px"/><div><span style="font-size:16px">Show 3-second average power</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Smooths power display for easier reading</p></div></label></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">‚ôø Accessibility</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingHighContrast" style="width:20px;height:20px"/><div><span style="font-size:16px">üî≥ High Contrast Mode</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Enhanced visibility for visual impairments</p></div></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingColorblindPatterns" style="width:20px;height:20px"/><div><span style="font-size:16px">üé® Colorblind-friendly Patterns</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Use patterns instead of colors for zones</p></div></label></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üîä Voice Feedback</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingVoiceEnabled" style="width:20px;height:20px"/><div><span style="font-size:16px">Enable Voice Feedback</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Text-to-speech announcements</p></div></label><div style="margin-left:30px;display:flex;flex-direction:column;gap:8px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingVoiceLaps" checked="checked" style="width:18px;height:18px"/> <span style="font-size:14px">Announce Laps</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingVoiceZones" checked="checked" style="width:18px;height:18px"/> <span style="font-size:14px">Announce Zone Changes</span></label></div><div style="margin-top:12px;padding-top:12px;border-top:1px solid #e1e4e8"><h4 style="font-size:14px;font-weight:600;margin:0 0 12px 0">üì¢ Interval Announcements</h4><div style="display:flex;flex-direction:column;gap:12px"><div style="display:flex;align-items:center;gap:10px"><label for="settingVoiceTimeInterval" style="font-size:14px;min-width:100px">Every:</label> <select id="settingVoiceTimeInterval" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="0">Disabled</option><option value="1">1 minute</option><option value="5">5 minutes</option><option value="10">10 minutes</option><option value="15">15 minutes</option><option value="30">30 minutes</option></select></div><div style="display:flex;align-items:center;gap:10px"><label for="settingVoiceDistanceInterval" style="font-size:14px;min-width:100px">Every:</label> <select id="settingVoiceDistanceInterval" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="0">Disabled</option><option value="1">1 km</option><option value="5">5 km</option><option value="10">10 km</option></select></div><div style="display:flex;align-items:center;gap:10px"><label for="settingVoiceSpeechRate" style="font-size:14px;min-width:100px">Speed:</label> <select id="settingVoiceSpeechRate" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="0.5">Slow</option><option value="0.75">Slower</option><option value="1" selected="selected">Normal</option><option value="1.25">Faster</option><option value="1.5">Fast</option><option value="2">Very Fast</option></select></div><div style="margin-top:8px"><p style="font-size:13px;font-weight:500;margin:0 0 8px 0">Announce these metrics:</p><div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px"><label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricPower" checked="checked" style="width:16px;height:16px"/> <span style="font-size:13px">Power</span></label> <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricHeartrate" checked="checked" style="width:16px;height:16px"/> <span style="font-size:13px">Heart Rate</span></label> <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricSpeed" checked="checked" style="width:16px;height:16px"/> <span style="font-size:13px">Speed</span></label> <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricCadence" style="width:16px;height:16px"/> <span style="font-size:13px">Cadence</span></label> <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricDistance" checked="checked" style="width:16px;height:16px"/> <span style="font-size:13px">Distance</span></label> <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="settingVoiceMetricTime" checked="checked" style="width:16px;height:16px"/> <span style="font-size:13px">Time</span></label></div></div></div></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üèÅ Auto-Lap</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingAutoLapEnabled" style="width:20px;height:20px"/><div><span style="font-size:16px">Enable Auto-Lap</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Automatically mark laps at intervals</p></div></label><div id="autoLapOptions" style="margin-left:30px;display:flex;flex-direction:column;gap:12px"><div style="display:flex;align-items:center;gap:10px"><label for="settingAutoLapSource" style="font-size:14px;min-width:80px">Trigger:</label> <select id="settingAutoLapSource" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="distance">Distance</option><option value="time">Time</option></select></div><div id="autoLapDistanceOption" style="display:flex;align-items:center;gap:10px"><label for="settingAutoLapDistance" style="font-size:14px;min-width:80px">Every:</label> <select id="settingAutoLapDistance" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="1">1 km</option><option value="2">2 km</option><option value="5">5 km</option><option value="10">10 km</option></select></div><div id="autoLapTimeOption" style="display:none;align-items:center;gap:10px"><label for="settingAutoLapTime" style="font-size:14px;min-width:80px">Every:</label> <select id="settingAutoLapTime" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="1">1 minute</option><option value="5">5 minutes</option><option value="10">10 minutes</option><option value="15">15 minutes</option><option value="30">30 minutes</option></select></div><p style="font-size:12px;color:#666;margin:4px 0 0 0">Laps will be marked automatically based on the selected interval.</p></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">‚è∏Ô∏è Auto-Pause</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingAutoPauseEnabled" style="width:20px;height:20px"/><div><span style="font-size:16px">Enable Auto-Pause</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Automatically pause when activity drops</p></div></label><div id="autoPauseOptions" style="margin-left:30px;display:flex;flex-direction:column;gap:12px"><div style="display:flex;align-items:center;gap:10px"><label for="settingAutoPauseSource" style="font-size:14px;min-width:80px">Monitor:</label> <select id="settingAutoPauseSource" style="padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"><option value="speed">Speed</option><option value="power">Power</option><option value="cadence">Cadence</option></select></div><div style="display:flex;align-items:center;gap:10px"><label for="settingAutoPauseThreshold" style="font-size:14px;min-width:80px">Threshold:</label> <input type="number" id="settingAutoPauseThreshold" min="0" max="100" step="0.5" value="3" style="width:70px;padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"/> <span id="autoPauseThresholdUnit" style="font-size:14px;color:#666">km/h</span></div><div style="display:flex;align-items:center;gap:10px"><label for="settingAutoPauseDelay" style="font-size:14px;min-width:80px">Delay:</label> <input type="number" id="settingAutoPauseDelay" min="1" max="30" step="1" value="3" style="width:70px;padding:6px 10px;border-radius:4px;border:1px solid #d0d7de;font-size:14px"/> <span style="font-size:14px;color:#666">seconds</span></div><p style="font-size:12px;color:#666;margin:4px 0 0 0">Workout will pause after being below threshold for the delay period.</p></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üîó Intervals.icu</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingIntervalsEnabled" style="width:20px;height:20px"/><div><span style="font-size:16px">Enable Integration</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Upload workouts to Intervals.icu</p></div></label><div id="intervalsOptions" style="display:none;margin-left:30px;flex-direction:column;gap:12px"><div style="display:flex;flex-direction:column;gap:4px"><label for="settingIntervalsApiKey" style="font-size:14px">API Key:</label><div style="display:flex;gap:8px"><input type="password" id="settingIntervalsApiKey" placeholder="Enter API Key from Intervals.icu Settings" style="padding:8px;border:1px solid #ccc;border-radius:4px;flex:1"/> <button id="toggleIntervalsApiKey" type="button" aria-label="Toggle API Key visibility" style="background:0 0;border:1px solid #ccc;border-radius:4px;padding:0 10px;cursor:pointer">üëÅÔ∏è</button></div><p style="font-size:12px;color:#666;margin:2px 0 0 0">Find this in Intervals.icu > Settings > Developer</p></div><div style="display:flex;flex-direction:column;gap:4px"><label for="settingIntervalsAthleteId" style="font-size:14px">Athlete ID:</label> <input id="settingIntervalsAthleteId" value="i" placeholder="Usually 'i' for yourself" style="padding:8px;border:1px solid #ccc;border-radius:4px;width:100px"/><p style="font-size:12px;color:#666;margin:2px 0 0 0">Use 'i' for your own account, or specific ID.</p></div><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer;margin-top:4px"><input type="checkbox" id="settingIntervalsAutoUpload" style="width:18px;height:18px"/> <span style="font-size:14px">Auto-upload on save</span></label></div></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üíæ Export Formats</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingExportTcx" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">TCX</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingExportCsv" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">CSV</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingExportJson" style="width:20px;height:20px"/> <span style="font-size:16px">JSON</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingExportFit" style="width:20px;height:20px"/> <span style="font-size:16px">FIT (Garmin)</span></label></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üìù Post-Workout</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingPromptForNotes" checked="checked" style="width:20px;height:20px"/><div><span style="font-size:16px">Prompt for Title & Notes</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Add a title and notes after each workout</p></div></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingPromptForExertion" checked="checked" style="width:20px;height:20px"/><div><span style="font-size:16px">Prompt for Perceived Exertion</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Rate how hard the workout felt (RPE 1-10)</p></div></label></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">‚è±Ô∏è Countdown Timer</legend><div style="display:flex;flex-direction:column;gap:12px"><div style="display:flex;align-items:center;gap:10px"><label for="settingCountdownDuration" style="font-size:16px;min-width:100px">Duration:</label> <select id="settingCountdownDuration" style="padding:8px 12px;border-radius:4px;border:1px solid #d0d7de;font-size:14px;flex:1"><option value="0">Disabled</option><option value="3">3 seconds</option><option value="5">5 seconds</option><option value="10">10 seconds</option></select></div><p style="font-size:12px;color:#666;margin:0 0 8px 0">Show a countdown before the workout starts to give you time to get ready.</p><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingCountdownBeep" checked="checked" style="width:20px;height:20px"/> <span style="font-size:16px">Enable Beep Sound</span></label> <label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingCountdownVoice" style="width:20px;height:20px"/> <span style="font-size:16px">Enable Voice Announcement</span></label></div></fieldset><fieldset class="settings-fieldset" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px"><legend style="font-weight:600;padding:0 8px">üêû Debug</legend><div style="display:flex;flex-direction:column;gap:12px"><label class="settings-option" style="display:flex;align-items:center;gap:10px;cursor:pointer"><input type="checkbox" id="settingDebugMode" style="width:20px;height:20px"/><div><span style="font-size:16px">Enable Debug Mode</span><p style="font-size:12px;color:#666;margin:2px 0 0 0">Capture raw sensor packets</p></div></label><div id="debugControls" style="display:none;margin-left:30px;flex-direction:column;gap:10px"><button id="downloadDebugLogs" class="secondary-btn" style="padding:6px 12px;font-size:.9rem">‚¨áÔ∏è Download Logs</button> <button id="clearDebugLogs" class="secondary-btn" style="padding:6px 12px;font-size:.9rem">üóëÔ∏è Clear Logs</button></div></div></fieldset><fieldset class="settings-fieldset" id="installPwaContainer" style="border:1px solid #d0d7de;border-radius:8px;padding:16px;margin-bottom:20px;display:none"><legend style="font-weight:600;padding:0 8px">üì± App Installation</legend><div style="display:flex;flex-direction:column;gap:12px"><p style="font-size:14px;color:#666;margin:0">Install this app on your device for a better experience and offline access.</p><button id="installPwaButton" aria-label="Install application as PWA" style="background:#2196f3;color:#fff;border:none;padding:12px 20px;border-radius:6px;cursor:pointer;font-weight:700;font-size:16px">üì≤ Install App</button></div></fieldset><div style="display:flex;justify-content:flex-end;margin-top:20px"><button id="saveSettings" style="padding:10px 20px;border:none;background:#2196f3;color:#fff;border-radius:6px;cursor:pointer;font-weight:700;font-size:16px">Save Settings</button></div></div></template><template id="workoutHistoryTemplate"><div class="page-header" style="padding:16px;border-bottom:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center"><h2 id="workoutHistoryTitle">üìä Workout History</h2></div><div class="page-content" style="padding:16px;overflow-y:auto;flex:1"><div id="workoutListPanel"><div class="workout-filters" style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center;border-bottom:1px solid var(--color-border);padding-bottom:12px"><div class="filter-group" style="display:flex;gap:4px;align-items:center"><label for="workoutTypeFilter" class="sr-only">Type</label> <select id="workoutTypeFilter" style="padding:6px;border-radius:4px;border:1px solid var(--color-border);background:var(--input-bg);color:var(--color-text-primary)"><option value="">All Types</option><option value="cycling">Cycling</option><option value="indoor_cycling">Indoor Cycling</option><option value="running">Running</option></select></div><div class="filter-group" style="display:flex;gap:4px;align-items:center"><label for="workoutDateStart" class="sr-only">Start Date</label> <input type="date" id="workoutDateStart" style="padding:5px;border-radius:4px;border:1px solid var(--color-border);background:var(--input-bg);color:var(--color-text-primary)"/> <span aria-hidden="true">-</span> <label for="workoutDateEnd" class="sr-only">End Date</label> <input type="date" id="workoutDateEnd" style="padding:5px;border-radius:4px;border:1px solid var(--color-border);background:var(--input-bg);color:var(--color-text-primary)"/></div><div style="flex-grow:1"></div><div class="source-toggle" style="display:flex;border:1px solid var(--color-border);border-radius:4px;overflow:hidden;margin-right:8px"><button id="sourceCloudBtn" class="source-btn active" aria-pressed="true" style="padding:6px 12px;border:none;background:var(--color-bg-active);color:var(--color-text-primary);cursor:pointer">Cloud</button> <button id="sourceLocalBtn" class="source-btn" aria-pressed="false" style="padding:6px 12px;border:none;background:0 0;color:var(--color-text-primary);cursor:pointer">Local</button></div><div class="view-toggle" style="display:flex;border:1px solid var(--color-border);border-radius:4px;overflow:hidden"><button id="viewListBtn" class="view-btn active" aria-pressed="true" style="padding:6px 12px;border:none;background:var(--color-bg-active);color:var(--color-text-primary);cursor:pointer">List</button> <button id="viewCalendarBtn" class="view-btn" aria-pressed="false" style="padding:6px 12px;border:none;background:0 0;color:var(--color-text-primary);cursor:pointer">üìÖ</button> <button id="viewAnalyticsBtn" class="view-btn" aria-pressed="false" style="padding:6px 12px;border:none;background:0 0;color:var(--color-text-primary);cursor:pointer" title="Analytics">üìà</button></div></div><div id="workoutListView"><div class="workout-controls" role="toolbar" aria-label="Workout history controls"><button id="historyRefresh" class="workout-control-btn" aria-label="Refresh workout list" title="Refresh">üîÑ</button><nav class="workout-pagination" aria-label="Workout history pagination"><button id="historyPrevPage" class="workout-control-btn" aria-label="Previous page" disabled="disabled">‚óÄ</button> <span id="historyPageInfo" aria-live="polite">Page 1 of 1</span> <button id="historyNextPage" class="workout-control-btn" aria-label="Next page" disabled="disabled">‚ñ∂</button></nav></div><div id="workoutList" class="workout-list" role="list" aria-label="Workout entries"></div></div><div id="workoutCalendarView" style="display:none"><div class="calendar-controls" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px"><button id="calendarPrevMonth" class="workout-control-btn" aria-label="Previous month">‚óÄ</button><h3 id="calendarMonthLabel" style="margin:0">January 2026</h3><button id="calendarNextMonth" class="workout-control-btn" aria-label="Next month">‚ñ∂</button></div><div id="workoutCalendarGrid" class="calendar-grid" style="display:grid;grid-template-columns:repeat(7,1fr);gap:4px"></div></div><div id="workoutAnalyticsView" style="display:none"><h3 class="section-title">üìä Analytics & Records</h3><div class="analytics-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;padding:8px"><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border)"><h4>üèÖ Personal Records</h4><div id="prList" style="margin-top:12px"><div style="padding:12px;text-align:center;color:var(--color-text-secondary)">Loading records...</div></div></div><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border)"><h4>üèãÔ∏è Training Load (Last 4 Weeks)</h4><div id="trainingLoadChart" style="height:150px;margin-top:12px;display:flex;align-items:flex-end;justify-content:space-around;gap:4px"></div></div><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border);grid-column:1/-1"><h4>‚ö° Power Curve (All Time Bests)</h4><div id="powerCurveChart" style="height:200px;margin-top:12px;position:relative"></div></div><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border);grid-column:1/-1"><h4>üìà Fitness Trend (CTL / ATL)</h4><div id="fitnessTrendChart" style="height:250px;margin-top:12px;position:relative"></div></div><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border);grid-column:1/-1"><h4>üìä FTP History</h4><div id="ftpHistoryChart" style="height:200px;margin-top:12px;position:relative"></div></div><div class="card" style="background:var(--card-bg);padding:16px;border-radius:8px;border:1px solid var(--color-border);grid-column:1/-1"><h4>üèÖ PR History (Chronological)</h4><div id="prHistoryList" style="margin-top:12px;max-height:300px;overflow-y:auto"><div style="text-align:center;color:var(--color-text-secondary)">Loading...</div></div></div></div></div></div><div id="workoutDetailPanel" style="display:none"></div></div></template><div id="aboutModal" class="stream-modal" role="dialog" aria-labelledby="aboutModalTitle" aria-modal="true" style="display:none"><div class="stream-modal-content" style="max-width:500px"><div class="stream-modal-header"><h2 id="aboutModalTitle">‚ÑπÔ∏è About Bike Power Tracker</h2><button id="closeAboutModal" class="close-button" aria-label="Close about modal">&times;</button></div><div class="stream-modal-body" style="line-height:1.6"><p><strong>Bike Power Tracker</strong> is a progressive web application for tracking cycling workouts using Bluetooth sensors (Power, Cadence, Heart Rate).</p><p>This project was <strong>vibecoded</strong> with AI assistance, designed to be simple, privacy-focused, and offline-capable.</p><h3 style="margin-top:16px;margin-bottom:8px">Features:</h3><ul style="padding-left:20px;margin-bottom:16px"><li>Real-time Bluetooth sensor connection</li><li>Offline-first PWA architecture</li><li>Live streaming to remote observers</li><li>Data export (TCX, CSV, JSON, FIT)</li><li>Dark mode & accessibility themes</li></ul><p style="margin-top:20px;font-size:12px;color:#666;text-align:center">Version 1.0.0</p></div></div></div><template id="debugTemplate"><div class="page-header" style="padding:16px;border-bottom:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center"><h2 id="debugTitle">üêõ Debug & Connections</h2></div><div class="page-content" style="padding:16px;display:flex;flex-direction:column;gap:16px;height:100%"><div class="connection-controls" style="display:flex;gap:12px;flex-wrap:wrap"><button id="connectTreadmillDebug" class="action-btn">üèÉ Connect Treadmill</button> <button id="connectRowerDebug" class="action-btn">üö£ Connect Rower</button> <button id="connectConcept2Debug" class="action-btn">üö£ Connect Concept2</button> <button id="downloadLogs" class="secondary-btn">üíæ Download Raw Output</button></div><div class="log-container" style="flex:1;display:flex;flex-direction:column"><h3 style="margin-bottom:8px">Raw Bluetooth Output</h3><textarea id="debugLog" readonly="readonly" style="flex:1;min-height:300px;width:100%;background:#000;color:#0f0;font-family:monospace;padding:12px;border-radius:4px;box-sizing:border-box;resize:none"></textarea></div></div></template><template id="workoutSelectionTemplate"><div class="page-header" style="padding:16px;border-bottom:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center"><h2 id="workoutModalTitle">üèãÔ∏è Structured Workouts</h2></div><div class="page-content" style="padding:16px;overflow-y:auto;flex:1"><div style="padding:0 0 1rem;display:flex;justify-content:space-between;align-items:center"><div><input type="file" id="importWorkoutInput" accept=".json" style="display:none"/> <button id="importWorkoutBtn" class="secondary-btn" style="padding:8px 12px;font-size:.9rem">üì• Import</button></div><button id="createWorkoutBtn" class="action-btn" style="padding:8px 16px;font-size:.9rem">+ Create Custom</button></div><div class="stream-modal-body" style="overflow-y:visible"><div id="workoutList" class="workout-list" style="display:flex;flex-direction:column;gap:12px"></div></div></div></template><div id="workoutBuilderModal" class="stream-modal" role="dialog" aria-labelledby="workoutBuilderTitle" aria-modal="true" style="display:none"><div class="stream-modal-content" style="max-width:600px;max-height:90vh;display:flex;flex-direction:column"><div class="stream-modal-header"><h2 id="workoutBuilderTitle">üõ†Ô∏è Create Workout</h2><button id="closeBuilderModal" class="close-button" aria-label="Close builder">&times;</button></div><div class="stream-modal-body" style="overflow-y:auto;padding-bottom:2rem"><div class="form-group"><label for="wbName">Workout Name</label> <input id="wbName" placeholder="e.g. 4x4 Intervals"/></div><div class="form-group"><label for="wbDesc">Description</label> <textarea id="wbDesc" rows="2" placeholder="Describe the workout..."></textarea></div><h3>Steps</h3><div id="wbStepsList" class="wb-steps-list" style="display:flex;flex-direction:column;gap:8px;margin-bottom:1rem"><div class="wb-step-empty" style="text-align:center;color:var(--color-text-secondary);padding:1rem;border:1px dashed var(--color-border)">No steps added yet.</div></div><div class="wb-add-step-form" style="background:var(--card-bg);padding:12px;border:1px solid var(--color-border);border-radius:8px"><h4 style="margin-top:0;margin-bottom:12px">Add Step</h4><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px"><div class="form-group"><label for="wbStepType">Type</label> <select id="wbStepType"><option value="warmup">Warmup</option><option value="active">Active</option><option value="rest">Rest</option><option value="cooldown">Cooldown</option></select></div><div class="form-group"><label for="wbStepDuration">Duration (sec)</label> <input type="number" id="wbStepDuration" value="60" min="5"/></div><div class="form-group"><label for="wbTargetType">Target Type</label> <select id="wbTargetType"><option value="power">Power (W)</option><option value="percent_ftp">% FTP</option><option value="open">Open (No target)</option></select></div><div class="form-group"><label for="wbTargetValue">Target Value</label> <input type="number" id="wbTargetValue" value="200"/></div></div><button id="wbAddStepRef" type="button" class="action-btn" style="width:100%;margin-top:8px">Add Step</button></div><div class="wb-actions" style="margin-top:2rem;display:flex;gap:12px;justify-content:flex-end"><button id="wbCancel" class="secondary-btn">Cancel</button> <button id="wbSave" class="primary-btn">üíæ Save Workout</button></div></div></div></div><div id="workoutPlayerOverlay" class="workout-overlay" role="complementary" aria-label="Workout Player" style="display:none"><div class="workout-player-header"><h3 id="wpWorkoutName" style="margin:0;font-size:1rem">Workout Name</h3><div style="display:flex;gap:8px"><button id="wpMinimize" aria-label="Minimize player" style="background:0 0;border:none;color:#fff;cursor:pointer">_</button> <button id="wpClose" aria-label="Stop workout" style="background:0 0;border:none;color:#fff;cursor:pointer">√ó</button></div></div><div class="workout-player-body"><div class="wp-main-row" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px"><div class="wp-step-info"><div id="wpStepDescription" class="wp-desc" style="font-weight:700;font-size:1.2rem">Warmup</div><div class="wp-timer" style="font-family:monospace;font-size:1.5rem"><span id="wpStepTime">00:00</span> / <span id="wpStepDuration">10:00</span></div></div><div class="wp-target" style="text-align:right"><div class="wp-target-val" style="font-size:2.5rem;font-weight:700;line-height:1"><span id="wpTargetPower">--</span><span class="unit" style="font-size:1rem">W</span></div><div class="wp-target-label" style="font-size:.8rem;text-transform:uppercase">Target</div></div></div><div class="wp-next" style="font-size:.9rem;color:rgba(255,255,255,.8);margin-bottom:8px"><span>Next:</span> <span id="wpNextStep">Interval 1 (200W)</span></div><div class="wp-controls"><button id="wpSkip" class="wp-btn" style="width:100%;padding:8px;background:rgba(255,255,255,.2);border:none;color:#fff;border-radius:4px;cursor:pointer">Skip Step ‚è≠Ô∏è</button></div></div><div class="wp-progress-bar" style="height:4px;background:rgba(0,0,0,.3);margin-top:8px"><div id="wpProgress" style="width:0%;height:100%;background:var(--color-accent,#2196f3);transition:width 1s linear"></div></div></div></body></html>